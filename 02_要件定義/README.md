# Phase 2: 要件定義（Requirements Definition）

## 概要

Phase 1で作成したTo-Be業務フローをもとに、システムの詳細要件を定義します。機能要件・非機能要件・画面遷移・見積もり・WBSを作成し、開発に必要な情報を確定させます。

## 期間

- **標準**: 1〜2ヶ月
- **ミーティング回数**: 6回（週1〜2回ペース）

## このフェーズで作成する成果物

1. **既存システム構成整理**: 既存システムの構成・データ・外部IF
2. **要件定義書**: 全体をまとめた要件定義書（v1）
3. **機能一覧**: システムが提供する機能のリスト
4. **ユースケース**: 各機能の利用シナリオ
5. **画面遷移図**: 画面フローと画面間のインタラクション
6. **非機能要件**: 性能・セキュリティ・運用要件など
7. **見積書**: ±30%精度の詳細見積もり（Medium）
8. **WBS**: 作業分解構造と工程計画

## ワークフロー

### 準備: 既存システムのヒアリング

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第1回ミーティング)）:
- 既存システムの構成・役割
- 保有データの棚卸し
- 外部システムとの連携

**使用プロンプト**:
1. [`00_既存システムデータヒアリング整理.md`](./プロンプト/00_既存システムデータヒアリング整理.md)
   - ヒアリング内容を構造化して整理
   - 使用テンプレート: [`00_既存システム構成整理.md`](./テンプレート/00_既存システム構成整理.md)、[`00_既存データ整理.md`](./テンプレート/00_既存データ整理.md)、[`00_外部IF一覧.md`](./テンプレート/00_外部IF一覧.md)

### Week 1-2: 機能要件の定義

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第2回ミーティング)）:
- 機能一覧の確認
- 機能の優先順位付け（Must/Should/Could）
- MVP（最小実装）の合意

**使用プロンプト**:
1. [`02_機能一覧作成.md`](./プロンプト/02_機能一覧作成.md)
   - To-Beフローから機能を抽出
   - 使用テンプレート: [`02_機能一覧.md`](./テンプレート/02_機能一覧.md)
   - 入力: Phase 1の業務フロー（To-Be）

### Week 2-3: ユースケースと画面遷移の定義

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第3回ミーティング)）:
- ユースケースの確認（正常系・異常系）
- 画面遷移図の確認
- 画面モックアップの共有（Figma等）

**使用プロンプト**:
1. [`03_ユースケース作成.md`](./プロンプト/03_ユースケース作成.md)
   - 各機能の利用シナリオを記述
   - 使用テンプレート: [`03_ユースケース.md`](./テンプレート/03_ユースケース.md)
   - 入力: 機能一覧

2. [`04_画面遷移IF作成.md`](./プロンプト/04_画面遷移IF作成.md)
   - 画面遷移図とインタラクションを定義
   - 使用テンプレート: [`04_画面遷移.md`](./テンプレート/04_画面遷移.md)
   - 入力: ユースケース

### Week 3-4: 非機能要件の定義

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第4回ミーティング)）:
- 性能要件（同時接続数、レスポンスタイム）
- セキュリティ要件（認証、権限、データ保護）
- 運用要件（バックアップ、監視、保守）

**使用プロンプト**:
1. [`05_非機能要件チェックリスト作成.md`](./プロンプト/05_非機能要件チェックリスト作成.md)
   - 非機能要件のチェックリストを作成
   - 使用テンプレート: [`05_非機能要件.md`](./テンプレート/05_非機能要件.md)
   - 入力: 機能一覧、既存システム構成

### Week 4-5: 見積もりとWBS作成

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第5回ミーティング)）:
- 見積書の説明（機能別・工程別）
- WBSの説明（タスク分解、担当、期間）
- スコープ・コスト・期間の調整

**使用プロンプト**:
1. [`07_見積書作成.md`](./プロンプト/07_見積書作成.md)
   - 機能一覧から詳細見積もりを作成（±30%精度）
   - 使用テンプレート: [`07_見積書.md`](./テンプレート/07_見積書.md)
   - 入力: 機能一覧、ユースケース、非機能要件

2. [`08_WBS作成.md`](./プロンプト/08_WBS作成.md)
   - タスク分解と工程計画を作成
   - 使用テンプレート: [`08_WBS.md`](./テンプレート/08_WBS.md)
   - 入力: 機能一覧、見積書

### Week 5-6: 要件定義書の統合と承認

**ミーティング内容**（[詳細](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md#第6回ミーティング)）:
- 要件定義書v1の最終確認
- 未決事項の整理
- Phase 3（設計・開発準備）への移行判断

**使用プロンプト**:
1. [`01_要件定義書作成.md`](./プロンプト/01_要件定義書作成.md)
   - 全ての要件をまとめた統合ドキュメント作成
   - 使用テンプレート: [`01_要件定義書.md`](./テンプレート/01_要件定義書.md)
   - 入力: 機能一覧、ユースケース、画面遷移、非機能要件、見積書、WBS

## プロンプト一覧

| 番号 | プロンプト名 | 目的 | 入力 | 出力テンプレート |
|-----|------------|------|------|----------------|
| 00 | [既存システムデータヒアリング整理](./プロンプト/00_既存システムデータヒアリング整理.md) | 既存環境の整理 | ヒアリング内容 | 既存システム構成整理、既存データ整理、外部IF一覧 |
| 01 | [要件定義書作成](./プロンプト/01_要件定義書作成.md) | 全体統合ドキュメント作成 | 02〜08の成果物 | 要件定義書 |
| 02 | [機能一覧作成](./プロンプト/02_機能一覧作成.md) | 機能要件の洗い出し | To-Beフロー | 機能一覧 |
| 03 | [ユースケース作成](./プロンプト/03_ユースケース作成.md) | 利用シナリオの定義 | 機能一覧 | ユースケース |
| 04 | [画面遷移IF作成](./プロンプト/04_画面遷移IF作成.md) | 画面フロー定義 | ユースケース | 画面遷移 |
| 05 | [非機能要件チェックリスト作成](./プロンプト/05_非機能要件チェックリスト作成.md) | 非機能要件の定義 | 機能一覧、既存構成 | 非機能要件 |
| 07 | [見積書作成](./プロンプト/07_見積書作成.md) | 詳細見積もり作成 | 機能一覧、ユースケース | 見積書 |
| 08 | [WBS作成](./プロンプト/08_WBS作成.md) | 作業計画作成 | 機能一覧、見積書 | WBS |

**注**: 06番のプロンプトは現在未作成です。

## テンプレート一覧

| 番号 | テンプレート名 | 用途 | インプット | 使用プロンプト |
|-----|-------------|------|----------|-------------|
| 00 | [既存システム構成整理](./テンプレート/00_既存システム構成整理.md) | 既存システムの構成整理 | ヒアリング内容、顧客提供資料 | 00_既存システムデータヒアリング整理 |
| 00 | [既存データ整理](./テンプレート/00_既存データ整理.md) | 既存データの棚卸し | ヒアリング内容、顧客提供資料 | 00_既存システムデータヒアリング整理 |
| 00 | [外部IF一覧](./テンプレート/00_外部IF一覧.md) | 外部連携の整理 | ヒアリング内容、顧客提供資料 | 00_既存システムデータヒアリング整理 |
| 01 | [要件定義書](./テンプレート/01_要件定義書.md) | 全体統合ドキュメント | 機能一覧、ユースケース、画面遷移、非機能要件、見積書、WBS | 01_要件定義書作成 |
| 02 | [機能一覧](./テンプレート/02_機能一覧.md) | 機能要件リスト | To-Beフロー、ペインポイントリスト | 02_機能一覧作成 |
| 03 | [ユースケース](./テンプレート/03_ユースケース.md) | 利用シナリオ | 機能一覧 | 03_ユースケース作成 |
| 04 | [画面遷移](./テンプレート/04_画面遷移.md) | 画面フロー | ユースケース、機能一覧 | 04_画面遷移IF作成 |
| 05 | [非機能要件](./テンプレート/05_非機能要件.md) | 非機能要件 | 機能一覧、既存システム構成 | 05_非機能要件チェックリスト作成 |
| 07 | [見積書](./テンプレート/07_見積書.md) | 詳細見積もり | 機能一覧、ユースケース、非機能要件 | 07_見積書作成 |
| 08 | [WBS](./テンプレート/08_WBS.md) | 作業計画 | 機能一覧、見積書 | 08_WBS作成 |

## 推奨作成順序

```
Step 0: 既存システムデータヒアリング整理
          ↓
Step 1: 機能一覧作成（02）
          ↓
Step 2: ユースケース作成（03）
          ↓
Step 3: 画面遷移IF作成（04）
          ↓
Step 4: 非機能要件チェックリスト作成（05）
          ↓
Step 5: 見積書作成（07）
          ↓
Step 6: WBS作成（08）
          ↓
Step 7: 要件定義書作成（01）← 全てを統合
```

## フェーズ完了条件（ゲートレビュー: 要件凍結）

以下の条件を満たすとPhase 3に進めます:

- [ ] **要件定義書v1承認**: 機能要件・非機能要件が承認されている
- [ ] **非機能要件合意**: 性能・セキュリティ・運用要件が合意されている
- [ ] **見積・WBS承認**: コスト・スコープ・スケジュールが承認されている
- [ ] **トレーサビリティ確認**: 業務フロー→機能→ユースケースの紐付けが明確
- [ ] **未決事項の優先順位付け**: オープンイシューが整理され、Phase 3で解決する順序が決まっている

## 次のフェーズ

[Phase 3: 設計・開発準備](../03_開発工程/README.md)

## 前のフェーズ

[Phase 1: 要求分析](../01_要求分析/README.md)

## 参考資料

- [プロジェクト全体の流れ](../00_docs/全体の流れ（受託開発）.md)
- [要件定義フェーズマイルストーン（Phase 2詳細）](../00_docs/要件定義フェーズ_顧客コミュニケーションマイルストーン.md)
- [CLAUDE.md（リポジトリ全体ガイド）](../CLAUDE.md)

## Tips

### 機能の優先順位付け（MoSCoW法）
- **Must**: 必須機能（MVPに含める）
- **Should**: 重要機能（リリース1.0に含める）
- **Could**: あれば良い機能（将来版で検討）
- **Won't**: 今回は実装しない

### 見積もり精度
- Phase 1: **Rough（±50%）** - 概算
- Phase 2: **Medium（±30%）** - 詳細見積もり ← このフェーズ
- Phase 3以降: **Firm（±10%）** - 確定見積もり

### 要件のトレーサビリティ
各要件は以下の流れで追跡可能にする:
```
業務課題（Phase 1）
  → 業務フロー（Phase 1 To-Be）
    → 機能要件（Phase 2 機能一覧）
      → ユースケース（Phase 2）
        → 設計（Phase 3）
          → テストケース（Phase 4）
```

### ビジュアルツール推奨
- **コラボレーション**: Miro、FigJam
- **UIモックアップ**: Figma
- **フローチャート**: PlantUML、Mermaid
