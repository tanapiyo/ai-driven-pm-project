# ユースケース定義書

## ドキュメント管理情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | |
| ドキュメント名 | ユースケース定義書 |
| 作成日 | YYYY/MM/DD |
| 最終更新日 | YYYY/MM/DD |
| 版数 | v1.0 |
| 作成者 | |
| 承認者 | |

---

## 1. ユースケース概要

### 1.1 ユースケース図

```
[ユースケース図をここに配置]

アクター:
- {アクター1}: {役割}
- {アクター2}: {役割}

主要ユースケース:
- UC-001: {ユースケース名}
- UC-002: {ユースケース名}
```

### 1.2 アクター一覧

| アクターID | アクター名 | 役割 | 権限レベル | 関連するユースケース | 備考 |
|-----------|-----------|------|-----------|-------------------|------|
| ACT-001 | 一般ユーザー | | 一般 | UC-001, UC-002, UC-003 | |
| ACT-002 | 管理者 | | 管理者 | UC-001～UC-010 | |
| ACT-003 | システム管理者 | | システム管理者 | UC-011～UC-015 | |
| ACT-004 | 外部システム | | - | UC-020 | |

### 1.3 ユースケース一覧

| UC-ID | ユースケース名 | アクター | 優先度 | 関連機能ID | 対応する業務プロセス | 状態 |
|-------|--------------|---------|--------|-----------|-------------------|------|
| UC-001 | | ACT-001 | 必須/推奨/任意 | F-XXX | P-XXX | 確定/検討中 |
| UC-002 | | ACT-001, ACT-002 | | F-XXX | P-XXX | |
| UC-003 | | ACT-002 | | F-XXX | P-XXX | |

---

## 2. ユースケース詳細

### UC-001: {ユースケース名}

#### 2.1.1 基本情報

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-001 |
| ユースケース名 | |
| 概要 | |
| アクター | ACT-XXX: {アクター名} |
| 優先度 | 必須 / 推奨 / 任意 |
| 関連機能 | F-XXX: {機能名} |
| 関連画面 | SC-XXX: {画面名} |
| 対応する業務プロセス | P-XXX: {プロセス名}（To-Be業務フロー図より） |
| 頻度 | 日次XXX回 / 週次XXX回 / 月次XXX回 / 随時 |

#### 2.1.2 ユースケースの目的

<!-- このユースケースで達成したいこと -->

#### 2.1.3 ステークホルダーと関心事

| ステークホルダー | 関心事 |
|----------------|--------|
| {アクター名} | |
| {関係部門} | |

#### 2.1.4 前提条件

<!-- このユースケースを実行する前に満たされているべき条件 -->

- ユーザーがログインしている
- XXXデータが登録されている
-

#### 2.1.5 事後条件

**成功時:**
<!-- ユースケースが正常に完了した後の状態 -->
- XXXデータが登録される
- XXXに通知が送信される
-

**失敗時:**
<!-- ユースケースが失敗した場合の状態 -->
- データは変更されない
- エラーメッセージが表示される
-

#### 2.1.6 トリガー（開始条件）

<!-- このユースケースが開始されるきっかけ -->

- {アクター}が{画面}を開く
- {イベント}が発生する
-

---

#### 2.1.7 基本フロー

<!-- 正常系の処理フロー -->

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| 1 | ○ | | {アクター}が{画面}を開く |
| 2 | | ○ | システムは{データ}を表示する |
| 3 | ○ | | {アクター}は{項目}を入力する |
| 4 | ○ | | {アクター}は「登録」ボタンをクリックする |
| 5 | | ○ | システムは入力内容をバリデーションする |
| 6 | | ○ | システムは{データ}をDBに登録する |
| 7 | | ○ | システムは完了メッセージを表示する |

**詳細記述:**

1. {アクター}が{画面}を開く
   - {画面}メニューから選択
   - {画面ID}: SC-XXX

2. システムは{データ}を表示する
   - {データの内容}
   - 初期表示条件:

3. {アクター}は{項目}を入力する
   - 入力項目:
     - {項目1}: {説明}
     - {項目2}: {説明}
   - バリデーション:
     - {項目1}: 必須、XX文字以内
     - {項目2}: 半角数字のみ

4～7. （以下同様に詳細を記述）

---

#### 2.1.8 代替フロー

<!-- 正常系から派生する別のルート -->

**代替フロー A: {代替シナリオ名}**

| 分岐条件 | 基本フロー ステップX で{条件} |
|---------|------------------------------|

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| A1 | | ○ | {処理内容} |
| A2 | ○ | | {アクター}は{アクション}を実行する |
| A3 | | ○ | 基本フローのステップYに戻る |

**代替フロー B: {代替シナリオ名}**

| 分岐条件 | 基本フロー ステップZ で{条件} |
|---------|------------------------------|

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| B1 | | ○ | {処理内容} |
| B2 | | ○ | ユースケース終了 |

---

#### 2.1.9 例外フロー

<!-- エラーや例外が発生した場合の処理 -->

**例外フロー E1: バリデーションエラー**

| 発生条件 | 基本フロー ステップ5 で入力値が不正 |
|---------|-----------------------------------|

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| E1-1 | | ○ | エラーメッセージを表示する |
| E1-2 | | ○ | エラー項目をハイライト表示する |
| E1-3 | | ○ | 基本フローのステップ3に戻る |

**エラーメッセージ:**
- 「{項目名}は必須です」
- 「{項目名}は{条件}で入力してください」

**例外フロー E2: データ重複エラー**

| 発生条件 | 基本フロー ステップ6 で同一データが存在 |
|---------|--------------------------------------|

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| E2-1 | | ○ | エラーメッセージを表示する |
| E2-2 | | ○ | 基本フローのステップ3に戻る |

**エラーメッセージ:**
- 「同じ{キー}のデータが既に存在します」

**例外フロー E3: システムエラー**

| 発生条件 | システム障害が発生 |
|---------|------------------|

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| E3-1 | | ○ | エラーメッセージを表示する |
| E3-2 | | ○ | エラーログを記録する |
| E3-3 | | ○ | 管理者に通知する |
| E3-4 | | ○ | ユースケース終了 |

**エラーメッセージ:**
- 「システムエラーが発生しました。管理者に連絡してください。」

---

#### 2.1.10 ビジネスルール

<!-- このユースケースに適用されるビジネスルール -->

| ルールID | ルール名 | 内容 |
|---------|---------|------|
| BR-001 | | |
| BR-002 | | |

---

#### 2.1.11 非機能要件

| 項目 | 要件 |
|------|------|
| 性能 | レスポンスタイム: X秒以内 |
| 可用性 | 稼働率: XX.X% |
| セキュリティ | アクセス制御: {権限レベル}のみ実行可能 |
| ユーザビリティ | 新規ユーザーがX分以内に操作習得可能 |

---

#### 2.1.12 UIモックアップ

<!-- 画面のワイヤーフレームやモックアップを添付 -->

```
+---------------------------+
| {画面名}                   |
+---------------------------+
| {項目1}: [_____________]  |
| {項目2}: [_____________]  |
|                           |
| [登録] [キャンセル]        |
+---------------------------+
```

---

#### 2.1.13 データ要件

**インプットデータ:**
| データ項目 | データ型 | 必須 | 制約 | デフォルト値 |
|-----------|---------|------|------|------------|
| | | ○/- | | |

**アウトプットデータ:**
| データ項目 | データ型 | 出力先 | 備考 |
|-----------|---------|--------|------|
| | | | |

**使用するマスタデータ:**
- M-XXX: {マスタ名}
-

---

#### 2.1.14 関連するユースケース

| 関係種別 | UC-ID | ユースケース名 | 関係の説明 |
|---------|-------|--------------|-----------|
| 前提 | UC-XXX | | このユースケースの前に実行される |
| 包含 (include) | UC-XXX | | このユースケースの一部として必ず実行される |
| 拡張 (extend) | UC-XXX | | 特定条件下で実行される |
| 後続 | UC-XXX | | このユースケースの後に実行される可能性がある |

---

#### 2.1.15 テストシナリオ

**テストケース1: 正常系**
- 前提条件:
- テストデータ:
- 実行手順: 基本フロー通り
- 期待結果:

**テストケース2: 代替フロー A**
- 前提条件:
- テストデータ:
- 実行手順:
- 期待結果:

**テストケース3: 例外フロー E1**
- 前提条件:
- テストデータ: 不正な入力値
- 実行手順:
- 期待結果: エラーメッセージが表示される

---

#### 2.1.16 補足情報

**実装上の注意事項:**
-

**運用上の注意事項:**
-

**既知の制約事項:**
-

**将来の拡張可能性:**
-

---

### UC-002: {ユースケース名}

#### 2.2.1 基本情報

| 項目 | 内容 |
|------|------|
| ユースケースID | UC-002 |
| ユースケース名 | |
| 概要 | |
| アクター | |
| 優先度 | |
| 関連機能 | |
| 関連画面 | |
| 対応する業務プロセス | |
| 頻度 | |

<!-- 以下、UC-001と同じ構造で記述 -->

---

## 3. ユースケース間の関係図

### 3.1 ユースケース依存関係

```
UC-001 (前提)
   ↓
UC-002 (基本)
   ↓
UC-003 (後続)

UC-004 ←include← UC-005
UC-006 ←extend← UC-007
```

### 3.2 ユースケース実行順序

**典型的な業務フロー:**

1. UC-001: {ユースケース名}
2. UC-002: {ユースケース名}
3. UC-003: {ユースケース名}

**代替パターン:**

1. UC-001: {ユースケース名}
2. UC-004: {ユースケース名}（条件により分岐）
3. UC-003: {ユースケース名}

---

## 4. トレーサビリティマトリクス

### 4.1 業務要件とユースケースの対応

| 業務要件ID | 業務要件 | 対応するユースケース | 備考 |
|-----------|---------|-------------------|------|
| BR-001 | | UC-001, UC-002 | |
| BR-002 | | UC-003 | |

### 4.2 ユースケースと機能の対応

| UC-ID | ユースケース名 | 関連機能ID | 機能名 | 備考 |
|-------|--------------|-----------|--------|------|
| UC-001 | | F-001, F-002 | | |
| UC-002 | | F-003 | | |

### 4.3 ユースケースと画面の対応

| UC-ID | ユースケース名 | 関連画面ID | 画面名 | 備考 |
|-------|--------------|-----------|--------|------|
| UC-001 | | SC-001, SC-002 | | |
| UC-002 | | SC-003 | | |

### 4.4 ユースケースとテストケースの対応

| UC-ID | ユースケース名 | テストケース数 | 正常系 | 異常系 | カバレッジ |
|-------|--------------|--------------|--------|--------|----------|
| UC-001 | | XX件 | XX件 | XX件 | XX% |
| UC-002 | | XX件 | XX件 | XX件 | XX% |

---

## 5. 共通フロー・共通処理

### 5.1 ログイン処理

<!-- 多くのユースケースで共通するログイン処理を定義 -->

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| 1 | ○ | | ユーザーID、パスワードを入力 |
| 2 | ○ | | ログインボタンをクリック |
| 3 | | ○ | 認証処理を実行 |
| 4 | | ○ | セッションを確立 |
| 5 | | ○ | ホーム画面を表示 |

### 5.2 エラー処理（共通）

**バリデーションエラー:**
- 入力値チェック
- エラーメッセージ表示
- エラー項目へのフォーカス移動

**システムエラー:**
- エラーログ記録
- エラーメッセージ表示
- 管理者への通知

### 5.3 承認フロー（共通）

<!-- 承認が必要なユースケースで共通する処理 -->

| ステップ | アクター | システム | 説明 |
|---------|---------|---------|------|
| 1 | 申請者 | | 申請を提出 |
| 2 | | ○ | 承認者に通知 |
| 3 | 承認者 | | 承認/却下を判断 |
| 4 | | ○ | 結果を申請者に通知 |

---

## 6. 用語集

| 用語 | 定義 |
|------|------|
| | |
| | |

---

## 7. 関連ドキュメント

| ドキュメント名 | 参照箇所 | 備考 |
|---------------|---------|------|
| 要件定義書 | 全体 | 親ドキュメント |
| To-Be業務フロー図 | 各ユースケースの業務プロセス対応 | インプット |
| 機能一覧 | 関連機能ID | 関連資料 |
| 画面遷移図 | 関連画面ID | 関連資料 |

---

## 改訂履歴

| 版数 | 改訂日 | 改訂者 | 改訂内容 |
|------|--------|--------|----------|
| v0.1 | YYYY/MM/DD | | 初版作成 |
| v1.0 | YYYY/MM/DD | | 正式版 |
| | | | |
