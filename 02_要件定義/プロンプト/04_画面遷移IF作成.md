# 画面遷移・IF作成プロンプト

## プロンプト使用方法

このプロンプトを使用して、ヒアリング議事録を起点に機能一覧・ユースケース定義書と突き合わせながら画面遷移図・IF定義書（中間成果物）を作成します。議事録に記録されたユーザー導線・外部連携の合意内容を必ず反映してください。

- **ヒアリング後**: 機能一覧確定後の画面遷移設計
- **ヒアリング準備**: 画面レビュー会の準備資料作成
- **UI/UXレビュー会**: 画面遷移・ワイヤーフレームのレビュー

### インプットファイル

- ヒアリング議事録（全回の議事録）
- 機能一覧（`02_機能一覧テンプレート.md`）
- ユースケース定義書（`03_ユースケーステンプレート.md`）
- To-Be業務フロー図／業務記述書
- 外部IF一覧草案、既存システム構成整理書（必要に応じて）

### アウトプット

- 画面遷移図・IF定義書（`04_画面遷移テンプレート.md` に基づく）

> **中間成果物の位置付け**  
> 画面遷移図・IF定義書は要件定義書に統合される前提の中間成果物です。各画面・IFについて、参照した議事録の箇所や根拠資料（機能一覧・ユースケース・外部IF一覧）を明示した状態で管理してください。

---

## プロンプト

```
以下のインプット情報を元に、画面遷移図・IF定義書を作成してください。

# インプット情報

## 1. ヒアリング議事録（全回の議事録）
{画面・操作・外部連携に関する議事録の該当箇所を時系列で貼り付け}

## 2. 機能一覧
{`02_機能一覧テンプレート.md`の最新版を貼り付け}

## 3. ユースケース定義書
{`03_ユースケーステンプレート.md`の最新版を貼り付け}

## 4. To-Be業務フロー図／業務記述書
{To-Be業務フロー図または業務記述書の最新版を貼り付け}

## 5. 外部IF一覧草案・既存システム構成整理書（任意）
{`00_外部IF一覧草案.md`、`00_既存システム構成整理書.md`の抜粋}

---

# 作成指示

「04_画面遷移テンプレート.md」のテンプレートに従って、以下の内容を含む画面遷移図・IF定義書を作成してください。

### トレーサビリティと整合性
- 各画面・IFには根拠となる議事録（議事録参照・発言者）と参照した機能ID／ユースケースIDを明記する
- 議事録に未記載の仮説は「未確認」「要フォロー」などのステータスを付与し、確認先を記す
- 先行する機能一覧・ユースケースと矛盾する場合は差分理由とフォローアップアクションを明示する

## 1. 画面遷移図（セクション1）

### 全体画面遷移図の作成
ユースケースの基本フローから画面遷移を抽出：
1. ログイン画面（SC-000）
2. ホーム画面（SC-001）
3. 業務メニューごとの画面グループ
4. 設定・管理画面

遷移の流れを矢印で表現：
```
SC-000 (ログイン)
    ↓
SC-001 (ホーム)
    ├→ SC-010 (業務1一覧)
    │   ├→ SC-011 (業務1詳細)
    │   └→ SC-012 (業務1登録)
    └→ SC-020 (業務2一覧)
```

### 画面分類とサマリー
機能一覧の画面一覧から画面を分類：
- 認証・ログイン
- ホーム・ダッシュボード
- 業務機能別
- マスタ管理
- システム設定

## 2. 画面一覧（セクション2）
機能一覧の画面一覧から以下を抽出：
- 画面ID（SC-XXX）
- 画面名
- 画面種別（一覧/詳細/入力/検索/ダッシュボード）
- 関連機能ID（F-XXX）
- 関連ユースケースID（UC-XXX）
- アクセス権限
- 優先度
- 根拠となる議事録（議事録参照・発言者・該当要約）

## 3. 画面詳細定義（セクション3）

各画面について以下を定義：

### 基本情報
- 画面ID、画面名、画面種別
- URL/パス
- 関連機能、関連ユースケース
- アクセス権限（アクター別）
- 根拠となる議事録（議事録参照・発言者）と参照資料（機能一覧/ユースケース）

### 画面概要
画面の目的と役割を記載

### 画面レイアウト
ASCII アートまたは説明文で画面レイアウトを表現：
```
+----------------------------------+
| ヘッダー                          |
+----------------------------------+
| 検索条件                          |
| [検索]                           |
+----------------------------------+
| 検索結果一覧                      |
+----------------------------------+
| [登録] [キャンセル]               |
+----------------------------------+
```

### 画面項目定義
機能一覧の画面項目から以下を抽出：
- 項目ID、項目名
- 種別（テキスト/数値/日付/選択/チェック/ファイル）
- 必須/任意
- 桁数、形式、初期値
- バリデーション

### 操作・ボタン定義
ユースケースの基本フローから操作を抽出：
- ボタンID、ボタン名
- 関連機能ID
- 処理内容
- 遷移先画面
- 備考

### 画面遷移
ユースケースのフローから遷移パターンを抽出：
- 遷移元画面
- 遷移先画面
- 遷移条件
- 根拠となる議事録（議事録参照・発言者・議題）

遷移図を作成：
```
   ┌──────────┐
   │ SC-010   │
   │ 一覧     │
   └──────────┘
        │
  ┌─────┴─────┐
  │           │
[詳細]      [登録]
  │           │
  ↓           ↓
SC-011     SC-012
```

### バリデーション
機能一覧のバリデーションから以下を抽出：
- チェック項目
- チェック内容
- エラーメッセージ
- チェックタイミング（入力時/ボタン押下時）

### イベント・処理
ユースケースの基本フローから以下を抽出：
- 画面表示時の処理
- ボタン押下時の処理
- 各種イベント処理

### セキュリティ要件
機能一覧のセキュリティ要件から抽出：
- データ暗号化
- 通信の暗号化（HTTPS）
- セッション管理

### 非機能要件
機能一覧の非機能要件から抽出：
- レスポンスタイム
- 可用性
- セキュリティ
- ブラウザ対応

## 4. 画面遷移パターン（セクション4）
典型的な画面遷移パターンを整理：
- パターン1: 一覧→詳細→編集
- パターン2: 検索→一覧→詳細
- パターン3: モーダルダイアログ

## 5. 外部インターフェース（IF）定義（セクション5）

### IF一覧
To-Be業務フロー図のシステム連携（S-XXX）と機能一覧の外部連携から抽出：
- IF-ID
- IF名
- IF種別（送信/受信/双方向）
- 連携先システム
- 連携方式（API/ファイル/DB）
- プロトコル
- 連携タイミング

### IF詳細

#### API連携の場合
機能一覧のAPI定義から以下を抽出：
- エンドポイント、HTTPメソッド
- 認証方式
- リクエストヘッダー、パラメータ、ボディ
- レスポンス（成功時/エラー時）
- エラー処理
- 性能要件

#### ファイル連携の場合
To-Be業務フロー図のファイル・データ（F-XXX）から以下を抽出：
- ファイル形式（CSV/XML/JSON/Excel）
- ファイル名規則
- ファイル配置場所
- ファイルフォーマット（項目定義）
- バリデーション
- 処理フロー
- エラー処理

#### DB連携の場合
機能一覧のDB連携から以下を抽出：
- 接続情報
- 連携方式（SELECT/INSERT/ストアドプロシージャ）
- 連携テーブル
- SQL例
- トランザクション制御

## 6. モーダル・ダイアログ定義（セクション6）
ユースケースの例外フローから以下を抽出：
- 確認ダイアログ
- エラー表示ダイアログ
- 詳細ポップアップ

## 7. 共通UI要素（セクション7）
すべての画面で共通する要素を定義：
- ヘッダー
- サイドメニュー
- フッター
- ページネーション

## 8. レスポンシブデザイン（セクション8）
対応デバイスと画面幅を定義：
- PC、タブレット、スマートフォン

## 9. アクセシビリティ（セクション9）
アクセシビリティ要件を定義：
- WCAG準拠レベル
- キーボード操作対応
- スクリーンリーダー対応

---

# 作成時の注意事項

1. **議事録との整合性**
   - 各画面・IFに対応する議事録（議事録参照・発言者・決定事項）を明記する
   - 仮説ベースの項目はステータスと確認予定先をセットで記載

2. **ユースケースとの対応**
   - 画面遷移がユースケースの基本フローと一致していること
   - すべてのユースケースが画面遷移図に反映されていること

3. **画面IDの一貫性**
   - 画面ID（SC-XXX）を機能グループごとに採番
   - 例: SC-000～009: 認証、SC-010～019: 業務1

4. **バリデーションの網羅性**
   - 機能一覧のエラー処理をすべてバリデーションとして定義

5. **外部IFのトレーサビリティ**
   - To-Be業務フロー図のシステム連携番号（S-XXX）との対応を明記

6. **画面項目の詳細化**
   - 機能一覧の画面項目をさらに詳細化
   - バリデーションルールを具体的に記載

---

# 作成後のチェックリスト

□ すべての画面・IFに議事録（議事録参照・発言者）の根拠が明記されている
□ すべての機能に対応する画面が定義されている
□ 画面遷移がユースケースのフローと整合している
□ 画面IDが一貫して採番されている（SC-001, SC-002, ...）
□ すべての画面項目にバリデーションが定義されている
□ 外部IFがTo-Be業務フロー図のシステム連携と対応している
□ IF-IDが一貫して採番されている（IF-001, IF-002, ...）
□ API/ファイル/DB連携の仕様が詳細に定義されている
□ エラー処理が網羅されている
□ 共通UI要素が定義されている
□ アクセシビリティ要件が定義されている

---

# 【サイドセッション】UI/UXレビュー会準備資料

このセクションは、UI/UXレビュー会（サイドセッション）で使用する準備資料を作成します。

## レビュー会アジェンダ案

### 1. レビュー会概要

| 項目 | 内容 |
|------|------|
| 会議名 | UI/UXレビュー会 |
| 目的 | 画面遷移・ワイヤーフレームのレビューとユーザビリティ確認 |
| 対象 | 主要画面（優先度「高」の画面） |
| 参加者 | PM、PL、顧客（業務担当者、部門長）、UI/UXデザイナー（任意） |
| 所要時間 | 2時間 |

### 2. レビュー対象画面リスト

画面一覧から優先度「高」「中」の画面を抽出：

| 画面ID | 画面名 | 画面種別 | 優先度 | レビュー観点 | 所要時間 |
|--------|--------|---------|--------|------------|---------|
| SC-001 | ログイン画面 | 入力 | 高 | 認証方式、エラー表示 | 5分 |
| SC-010 | 受注一覧画面 | 一覧 | 高 | 検索条件、一覧表示項目、ソート | 15分 |
| SC-011 | 受注詳細画面 | 詳細 | 高 | 項目配置、関連情報表示 | 10分 |
| SC-012 | 受注登録画面 | 入力 | 高 | 入力フロー、バリデーション、確認画面 | 20分 |
| ... | ... | ... | ... | ... | ... |

### 3. レビュー観点チェックリスト

各画面について以下の観点でレビュー：

#### 3.1 ユーザビリティ観点

| チェック項目 | 確認内容 | 判定 | コメント |
|------------|---------|------|---------|
| 直感性 | 初見でも操作方法が理解できるか | ⬜ | |
| 一貫性 | 他画面と操作方法・用語が統一されているか | ⬜ | |
| 効率性 | 最小クリック数で目的が達成できるか | ⬜ | |
| エラー防止 | 誤操作を防ぐ仕組みがあるか | ⬜ | |
| フィードバック | 操作結果が明確にわかるか | ⬜ | |

#### 3.2 業務適合性観点

| チェック項目 | 確認内容 | 判定 | コメント |
|------------|---------|------|---------|
| 業務フロー適合 | 実際の業務フローに沿っているか | ⬜ | |
| 必要情報の表示 | 業務遂行に必要な情報が表示されているか | ⬜ | |
| 不要情報の排除 | 不要な情報が表示されていないか | ⬜ | |
| 操作頻度 | よく使う機能がアクセスしやすい場所にあるか | ⬜ | |

#### 3.3 デザイン観点

| チェック項目 | 確認内容 | 判定 | コメント |
|------------|---------|------|---------|
| 視認性 | 文字・ボタンが見やすいか | ⬜ | |
| 情報の優先順位 | 重要な情報が強調されているか | ⬜ | |
| レスポンシブ対応 | PC/タブレットで適切に表示されるか | ⬜ | |
| アクセシビリティ | 色覚多様性、スクリーンリーダー対応 | ⬜ | |

### 4. 画面ごとのレビューシート（サンプル）

#### SC-012: 受注登録画面

**ワイヤーフレーム（簡易版）:**
```
+--------------------------------------------------+
| ヘッダー: 受注登録                                 |
+--------------------------------------------------+
| 顧客情報（自動表示）                               |
|   顧客名: [XXX株式会社]  担当者: [山田太郎]        |
+--------------------------------------------------+
| 受注情報                                          |
|   受注日: [2025/01/20] [カレンダー]               |
|   納期: [2025/02/20] [カレンダー]                 |
|   備考: [                                ]       |
+--------------------------------------------------+
| 商品明細                                          |
| +-----------+------+------+--------+---------+   |
| | 商品名    | 数量 | 単価 | 小計   | [削除]  |   |
| +-----------+------+------+--------+---------+   |
| | 商品A     | 10   | 1000 | 10,000 | [X]     |   |
| | 商品B     | 5    | 2000 | 10,000 | [X]     |   |
| +-----------+------+------+--------+---------+   |
| [商品追加]                      合計: 20,000円   |
+--------------------------------------------------+
| [キャンセル] [確認画面へ]                          |
+--------------------------------------------------+
```

**レビュー項目:**

| 観点 | 質問 | 回答・コメント | 対応要否 |
|------|------|--------------|---------|
| 項目順序 | 顧客情報→受注情報→商品明細の順序でよいか | | |
| 入力方法 | 商品は検索モーダルから選択 or ドロップダウン？ | | |
| バリデーション | 納期は受注日より後でないとエラーにするか | | |
| 確認画面 | 登録前に確認画面を表示するか | | |
| 承認フロー | この画面から承認申請に進むか | | |

### 5. レビュー後のアクションリスト

レビュー会で出た指摘事項を管理：

| No | 画面ID | 指摘事項 | 優先度 | 担当 | 期限 | 対応状況 |
|----|--------|---------|--------|------|------|---------|
| 1 | SC-012 | 商品検索の使いやすさ向上 | 高 | ベンダー | 3/15 | 対応中 |
| 2 | SC-010 | 一覧の並び順をカスタマイズ可能に | 中 | ベンダー | 3/20 | 検討中 |
| ... | ... | ... | ... | ... | ... | ... |

---

# 出力形式

「04_画面遷移テンプレート.md」の構成に従い、Markdown形式で出力してください。

UI/UXレビュー会準備資料は、`04_UIUXレビュー会準備資料.md` として別ファイルで出力することも可能です。
```

## 使用例

```
# インプット情報

## 1. ヒアリング議事録（全回の議事録）
[議事録の抜粋]

## 2. 機能一覧
[`02_機能一覧テンプレート.md`の内容]

## 3. ユースケース定義書
[`03_ユースケーステンプレート.md`の内容]

## 4. To-Be業務フロー図／業務記述書
[To-Be業務記述書の内容]

## 5. 外部IF一覧草案・既存システム構成整理書（任意）
[必要に応じて抜粋]

---

[上記プロンプトを適用]
```
