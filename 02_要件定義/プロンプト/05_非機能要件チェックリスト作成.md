# 非機能要件チェックリスト作成プロンプト

## プロンプト使用方法

このプロンプトを使用して、ヒアリング議事録とプロジェクト計画書を基点に非機能要件定義書（中間成果物）を作成します。議事録で合意・検討された制約や、機能一覧・ユースケースで明らかになった利用シナリオを反映し、要件定義書統合前の確認用ドキュメントとして整理してください。

- **ヒアリング準備**: 非機能要件のドラフト作成
- **ヒアリング準備**: 非機能要件レビュー会の準備資料作成
- **技術検討会**: 性能・セキュリティ要件の詳細レビュー

### インプットファイル

- ヒアリング議事録（全回の議事録）
- プロジェクト計画書
- 機能一覧（`02_機能一覧テンプレート.md`）
- ユースケース定義書（`03_ユースケーステンプレート.md`）
- 既存システム構成整理書・既存データ整理書（必要に応じて）
- 外部IF一覧草案（必要に応じて）

### アウトプット

- 非機能要件定義書（`05_非機能要件テンプレート.md` に基づく）

> **中間成果物の位置付け**  
> 非機能要件定義書は要件定義書に統合される前提の中間成果物です。各要求には根拠となる議事録（議事録参照・発言者）や参照資料（プロジェクト計画書、機能一覧、外部IF一覧など）を明示し、整合性チェックと差分管理をしやすくしてください。

---

## プロンプト

```
以下のインプット情報を元に、非機能要件定義書を作成してください。

# インプット情報

## 1. ヒアリング議事録（全回の議事録）
{議事録を時系列で貼り付け。非機能要件・制約・リスクに関する発言を強調する}

## 2. プロジェクト計画書
{プロジェクト計画書の内容を貼り付け}

## 3. 機能一覧
{機能一覧の内容を貼り付け}

## 4. ユースケース定義書
{ユースケース定義書の内容を貼り付け}

## 5. 外部IF一覧草案・既存システム構成整理書（任意）
{該当する連携要件やシステム制約の抜粋を貼り付け}

---

# 作成指示

「05_非機能要件テンプレート.md」のテンプレートに従って、以下の内容を含む非機能要件定義書を作成してください。

### トレーサビリティと整合性
- 各非機能要件に根拠となる議事録（議事録参照・発言者）と参照資料（プロジェクト計画書章番号、機能ID、ユースケースID、IF-IDなど）を明記する
- 議事録に未記載の仮説は「未確認」「要フォロー」等のステータスと確認先を記す
- 他の中間成果物（機能一覧・ユースケース・画面遷移・外部IF）と矛盾した場合は差分理由とフォローアップアクションを記載する

## 1. 非機能要件概要（セクション1）
- 本書の目的
- 適用範囲
- 優先順位の定義（必須/推奨/任意）

## 2. 性能要件（セクション2）

### レスポンスタイム
プロジェクト計画書の成功指標（KPI）、議事録で合意した業務シナリオ、機能一覧の処理フローから導出：
- オンライン処理: 画面表示、検索、登録、更新、削除、帳票出力、API応答
- バッチ処理: 各バッチの処理時間と完了時刻

目標値の設定基準：
- 画面表示: 通常2～3秒以内
- 検索処理: データ量に応じて3～5秒以内
- API応答: 1～2秒以内
- バッチ処理: 業務開始時刻から逆算

### スループット
プロジェクト計画書のユーザー数・業務量、議事録で共有されたピーク時利用状況、ユースケースのアクセス頻度から算出：
- 同時ログインユーザー数
- 同時実行トランザクション数
- API同時リクエスト数

### 処理容量
プロジェクト計画書の事業計画、既存データ整理書の現状データ量、議事録で合意した成長シナリオから3年後・5年後を想定：
- 登録ユーザー数
- マスタデータ件数
- トランザクションデータ件数
- ファイル保存容量
- DBサイズ

### リソース使用率
- CPU使用率
- メモリ使用率
- ディスク使用率
- ネットワーク帯域使用率

## 3. 可用性要件（セクション3）

### 稼働率
プロジェクト計画書の事業インパクト、議事録で確認したサービス提供時間や停止許容度から算出：
- システム稼働率: 通常99.0%～99.9%
- 年間停止時間

### 稼働時間
プロジェクト計画書の業務運用時間と議事録で合意したシステム稼働時間から設定：
- サービス提供時間
- バッチ処理時間
- メンテナンス時間

### 計画停止
- 定期メンテナンス
- 緊急メンテナンス
- システム更新

### 障害復旧
プロジェクト計画書のリスク管理、議事録で共有された障害事例や復旧要求、既存システムの運用ルールから導出：
- RTO（目標復旧時間）
- RPO（目標復旧時点）
- MTTR（平均復旧時間）
- MTBF（平均故障間隔）

## 4. セキュリティ要件（セクション4）

### 認証
- 認証方式（ID/パスワード、MFA、SSO）
- パスワードポリシー
- アカウントロック
- セッション管理

### 認可（アクセス制御）
- RBAC（ロールベースアクセス制御）
- 画面・機能単位のアクセス制御
- データ単位のアクセス制御

### データ保護
- 通信の暗号化（HTTPS/TLS）
- データベース暗号化
- パスワード暗号化
- ファイル暗号化
- バックアップデータ暗号化

### 監査ログ
- 操作ログ（ログイン/ログアウト、データ操作、設定変更）
- ログ記録項目
- ログ保存期間
- ログの改ざん防止

### 脆弱性対策
- SQLインジェクション対策
- XSS対策
- CSRF対策
- セッションハイジャック対策
- 脆弱性診断

### 個人情報保護
- 個人情報の取り扱い
- マスキング表示
- データ削除

## 5. 運用・保守要件（セクション5）

### バックアップ
プロジェクト計画書のリスク管理、議事録で合意したバックアップ/リストア方針、既存システム構成整理書から導出：
- バックアップ対象
- バックアップ方式（フル/差分）
- バックアップ取得時刻
- バックアップ保存先（オンサイト/オフサイト）
- バックアップ保存期間

### リストア
- リストア手順書
- リストアテスト
- リストア時間
- リストア範囲

### 監視
システムの安定稼働に必要な監視項目：
- サーバー死活監視
- リソース監視（CPU/メモリ/ディスク）
- プロセス監視
- DB接続監視
- バッチ監視
- エラーログ監視
- レスポンス監視
- SSL証明書監視

### ログ管理
- アプリケーションログ
- アクセスログ
- 監査ログ
- DBログ
- バッチ実行ログ

各ログの保存期間とローテーション方針を設定

### 障害対応
- 障害検知
- 第一報
- 一次対応
- 復旧完了報告
- エスカレーション

### 問い合わせ対応
- 問い合わせ窓口
- 受付時間
- 回答期限

## 6. 保守性要件（セクション6）
- データメンテナンス
- ドキュメント管理
- エラー通知

## 7. 移植性・拡張性要件（セクション7）
- プラットフォーム対応
- ブラウザ対応
- 拡張性（ユーザー数、データ量、機能追加）

## 8. ユーザビリティ要件（セクション8）
- 使いやすさ
- アクセシビリティ
- 多言語対応

## 9. 環境要件（セクション9）
プロジェクト計画書の技術方針、議事録で合意した制約条件、既存システム構成整理書の現行環境から設定：
- サーバー環境
- ネットワーク
- クライアント環境

## 10. テスト要件（セクション10）
- 性能テスト
- セキュリティテスト
- 運用テスト

---

# 作成時の注意事項

1. **実現可能な目標値の設定**
   - 過度に高い目標値は避ける
   - 業界標準やベンチマークを参考にする

2. **優先度の明確化**
   - すべての要件に優先度（必須/推奨/任意）を設定
   - 必須要件は確実に実現できるレベルに設定

3. **測定可能な指標**
   - 定量的な目標値を設定
   - 測定方法を明記

4. **プロジェクト計画書・議事録との整合性**
   - プロジェクト計画書のQCDS制約と矛盾しないこと
   - 議事録で合意した制約やリスク対応と一貫していること

5. **セキュリティ要件の網羅性**
   - 一般的なセキュリティ脅威に対する対策をすべて記載
   - 個人情報保護法などの法令遵守

6. **運用の実現可能性**
   - 運用体制で対応可能な監視・バックアップ計画
   - 運用コストを考慮

---

# 作成後のチェックリスト

□ すべての非機能要件に目標値が設定されている
□ 目標値が測定可能である
□ 優先度が設定されている
□ 各非機能要件に議事録（議事録参照・発言者）と参照資料の根拠が記載されている
□ プロジェクト計画書および議事録で合意したQCDS制約と整合している
□ セキュリティ要件が網羅されている
□ 運用要件が実現可能である
□ バックアップ/リストア要件が明確である
□ 監視項目が網羅されている
□ テスト要件が定義されている
□ 環境要件が明確である

---

# 【サイドセッション】技術検討会準備資料

このセクションは、技術検討会（サイドセッション）で使用する準備資料を作成します。

## 技術検討会アジェンダ案

### 1. 技術検討会概要

| 項目 | 内容 |
|------|------|
| 会議名 | 技術検討会 |
| 目的 | 非機能要件（性能・セキュリティ・運用）の技術的実現可能性確認 |
| 対象 | 性能要件、セキュリティ要件、運用要件、インフラ要件 |
| 参加者 | PM、PL、SE（技術リーダー）、顧客（情報システム部）、インフラエンジニア（任意） |
| 所要時間 | 2時間 |

### 2. 検討テーマ一覧

非機能要件定義書から技術検討が必要な項目を抽出：

| No | テーマ | カテゴリー | 検討内容 | 優先度 | 所要時間 |
|----|--------|-----------|---------|--------|---------|
| 1 | 性能要件の実現方式 | 性能 | 同時ユーザー数XX名でのレスポンスタイム達成方法 | 高 | 30分 |
| 2 | セキュリティ対策 | セキュリティ | 認証方式、暗号化方式の選定 | 高 | 20分 |
| 3 | 可用性の確保 | 可用性 | 冗長構成、バックアップ方式 | 中 | 20分 |
| 4 | 監視・運用 | 運用 | 監視ツール選定、アラート設計 | 中 | 15分 |
| 5 | インフラ構成 | 環境 | クラウド or オンプレ、スペック決定 | 高 | 25分 |

### 3. 検討テーマ詳細

#### テーマ1: 性能要件の実現方式

**背景:**
- 非機能要件定義書で定義した性能要件を実現するための技術方式を決定

**性能要件（再掲）:**
| 項目 | 目標値 | 現状の見込み | ギャップ |
|------|--------|------------|---------|
| 画面表示 | 2秒以内 | 未測定 | 要検証 |
| 検索処理 | 5秒以内（10,000件） | 未測定 | 要検証 |
| 同時ログインユーザー数 | 50名 | 未測定 | 要検証 |
| バッチ処理 | 深夜2:00～3:00に完了 | 未測定 | 要検証 |

**検討事項:**

| No | 検討項目 | 選択肢 | 推奨案 | 理由 | 決定 |
|----|---------|--------|--------|------|------|
| 1.1 | DBチューニング | インデックス最適化 / パーティショニング / キャッシュ | インデックス最適化 | コスト・実装容易性 | ⬜ |
| 1.2 | サーバースペック | スペックA（2コア/8GB） / スペックB（4コア/16GB） | スペックB | 同時ユーザー50名対応 | ⬜ |
| 1.3 | 負荷分散 | ロードバランサー導入 / 単一サーバー | 単一サーバー | ユーザー数50名なら不要 | ⬜ |
| 1.4 | バッチ並列化 | 並列処理 / 逐次処理 | 並列処理 | 処理時間短縮 | ⬜ |

**技術検証項目:**
- [ ] 負荷テストシナリオ作成（同時ユーザー50名想定）
- [ ] プロトタイプでの性能測定
- [ ] ボトルネック分析

#### テーマ2: セキュリティ対策

**背景:**
- セキュリティ要件を満たす認証・暗号化方式を選定

**セキュリティ要件（再掲）:**
| カテゴリー | 要件 | 優先度 |
|-----------|------|--------|
| 認証 | ID/パスワード認証 + MFA（多要素認証） | 必須 |
| 認可 | ロールベースアクセス制御（RBAC） | 必須 |
| 通信暗号化 | HTTPS/TLS 1.2以上 | 必須 |
| データ暗号化 | DB暗号化（パスワード・個人情報） | 必須 |
| 監査ログ | 全操作ログ記録、改ざん防止 | 必須 |

**検討事項:**

| No | 検討項目 | 選択肢 | 推奨案 | 理由 | 決定 |
|----|---------|--------|--------|------|------|
| 2.1 | MFA方式 | SMS認証 / メール認証 / アプリ認証 | メール認証 | 導入容易性、ユーザー受容性 | ⬜ |
| 2.2 | DB暗号化方式 | 列レベル暗号化 / TDE（Transparent Data Encryption） | 列レベル暗号化 | パスワード・個人情報のみ対象 | ⬜ |
| 2.3 | ログ保存先 | DB / ファイル / 外部ログ管理サービス | 外部ログ管理サービス | 改ざん防止、長期保存 | ⬜ |
| 2.4 | 脆弱性診断 | 実施する / 実施しない | 実施する | リリース前に必須 | ⬜ |

**技術検証項目:**
- [ ] MFA実装方式の検証（ライブラリ選定）
- [ ] 暗号化による性能影響の測定
- [ ] 脆弱性診断ツール・ベンダーの選定

#### テーマ3: 可用性の確保

**背景:**
- 稼働率99.0%を達成するためのシステム構成を決定

**可用性要件（再掲）:**
| 項目 | 目標値 |
|------|--------|
| 稼働率 | 99.0%（年間停止時間: 87.6時間以内） |
| 稼働時間 | 平日8:00～20:00 |
| RTO（目標復旧時間） | 4時間以内 |
| RPO（目標復旧時点） | 1日以内（前日バックアップまで） |

**検討事項:**

| No | 検討項目 | 選択肢 | 推奨案 | 理由 | 決定 |
|----|---------|--------|--------|------|------|
| 3.1 | サーバー冗長化 | Active-Active / Active-Standby / 単一サーバー | Active-Standby | コスト・稼働率99.0%達成可能 | ⬜ |
| 3.2 | バックアップ方式 | フルバックアップ（日次） / 差分バックアップ | フルバックアップ（日次） | RPO 1日で十分 | ⬜ |
| 3.3 | バックアップ保存先 | オンサイトのみ / オンサイト＋オフサイト | オンサイト＋オフサイト | 災害対策 | ⬜ |
| 3.4 | リストアテスト | 月次 / 四半期ごと / 実施しない | 四半期ごと | 運用負荷とのバランス | ⬜ |

**技術検証項目:**
- [ ] フェイルオーバーテスト（Active-Standby切り替え）
- [ ] バックアップ・リストアの所要時間測定
- [ ] 障害復旧手順書の作成

#### テーマ4: 監視・運用

**背景:**
- 安定稼働のための監視項目と監視ツールを選定

**運用要件（再掲）:**
- 24時間365日監視（自動監視ツール）
- 障害発生時は30分以内に第一報

**検討事項:**

| No | 検討項目 | 選択肢 | 推奨案 | 理由 | 決定 |
|----|---------|--------|--------|------|------|
| 4.1 | 監視ツール | Zabbix / Datadog / CloudWatch | CloudWatch | クラウド前提、導入容易 | ⬜ |
| 4.2 | 監視項目 | 死活のみ / 死活＋リソース / 死活＋リソース＋ログ | 死活＋リソース＋ログ | 包括的監視 | ⬜ |
| 4.3 | アラート通知先 | メール / Slack / 電話 | メール＋Slack | 即時性と記録性 | ⬜ |
| 4.4 | 一次対応体制 | ベンダー / 顧客 / 兼任 | ベンダー | 技術専門性 | ⬜ |

**技術検証項目:**
- [ ] 監視ツールの選定と導入計画
- [ ] アラート閾値の設定
- [ ] エスカレーションフローの策定

#### テーマ5: インフラ構成

**背景:**
- クラウド or オンプレミスの選定とサーバースペックの決定

**環境要件（再掲）:**
- 初期コスト: 予算内
- ランニングコスト: 月額XX万円以内
- 拡張性: ユーザー数2倍まで対応可能

**検討事項:**

| No | 検討項目 | 選択肢 | 推奨案 | 理由 | 決定 |
|----|---------|--------|--------|------|------|
| 5.1 | インフラ | AWS / Azure / GCP / オンプレミス | AWS | 実績、拡張性、コスト | ⬜ |
| 5.2 | Webサーバー | EC2 t3.medium / t3.large | t3.large | 同時ユーザー50名対応 | ⬜ |
| 5.3 | DBサーバー | RDS db.t3.medium / db.t3.large | db.t3.large | データ量・同時接続数 | ⬜ |
| 5.4 | ネットワーク | Public / VPC Private | VPC Private | セキュリティ | ⬜ |

**コスト試算:**

| 項目 | 初期コスト | 月額コスト | 備考 |
|------|-----------|-----------|------|
| Webサーバー（EC2） | 0円 | 50,000円 | t3.large × 2台 |
| DBサーバー（RDS） | 0円 | 80,000円 | db.t3.large |
| ストレージ（S3） | 0円 | 5,000円 | 100GB想定 |
| バックアップ | 0円 | 10,000円 | RDS自動バックアップ |
| ネットワーク | 0円 | 5,000円 | データ転送 |
| **合計** | **0円** | **150,000円** | |

**技術検証項目:**
- [ ] AWSアカウント開設とVPC構築
- [ ] 開発環境での動作確認
- [ ] コスト最適化（Reserved Instanceの検討）

### 4. 検討会後のアクションリスト

技術検討会で決定した事項と残タスクを管理：

| No | 決定事項 | 担当 | 期限 | ステータス |
|----|---------|------|------|-----------|
| 1 | サーバースペックをt3.largeに決定 | ベンダー | 3/10 | ✅ 完了 |
| 2 | MFA方式をメール認証に決定 | ベンダー | 3/10 | ✅ 完了 |
| 3 | 負荷テストシナリオ作成 | ベンダー | 3/20 | 🔄 対応中 |
| 4 | 監視ツール（CloudWatch）の導入計画策定 | ベンダー | 3/25 | ⬜ 未着手 |
| ... | ... | ... | ... | ... |

---

# 出力形式

「05_非機能要件テンプレート.md」の構成に従い、Markdown形式で出力してください。

技術検討会準備資料は、`05_技術検討会準備資料.md` として別ファイルで出力することも可能です。
```

## 使用例

```
# インプット情報

## 1. ヒアリング議事録（全回の議事録）
[議事録の抜粋]

## 2. プロジェクト計画書
[プロジェクト計画書の内容]

## 3. 機能一覧
[機能一覧の内容]

## 4. ユースケース定義書
[ユースケース定義書の内容]

## 5. 外部IF一覧草案・既存システム構成整理書（任意）
[必要に応じて抜粋]

---

[上記プロンプトを適用]
```
