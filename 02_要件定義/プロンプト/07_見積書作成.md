# 見積書作成プロンプト

## プロンプト使用方法

このプロンプトを使用して、要件定義書と機能一覧から見積書を作成します。

- **ヒアリング後**: 機能一覧確定後の初回見積作成（精度タグ: 多数Rough）
- **ヒアリング後**: 非機能要件確定後の見積更新（精度タグ: Rough→Refinedに更新）
- **ヒアリング準備**: 要件凍結ゲート向けの最終見積作成（精度タグ: 全Refined）

### インプットファイル

- 要件定義書
- 機能一覧
- 非機能要件定義書
- プロジェクト計画書

### アウトプット

- 見積書（`07_見積書テンプレート.md` に基づく）

---

## プロンプト

```
以下のインプット情報を元に、見積書を作成してください。

# インプット情報

## 1. 要件定義書
{要件定義書の内容を貼り付け}

## 2. 機能一覧
{機能一覧の内容を貼り付け}

## 3. 非機能要件定義書
{非機能要件定義書の内容を貼り付け}

## 4. プロジェクト計画書
{プロジェクト計画書の内容を貼り付け}

---

# 作成指示

「07_見積書テンプレート.md」のテンプレートに従って、以下の内容を含む見積書を作成してください。

## 1. 見積概要（セクション1）

プロジェクト計画書から以下を抽出：
- プロジェクト名
- 見積作成日
- 見積有効期限（通常3ヶ月）
- 見積作成者
- 見積先（発注元）

プロジェクト計画書のスケジュールから：
- プロジェクト期間
- 開始予定日
- 完了予定日

見積金額は後続のセクションで算出した合計を記載（一旦は仮置き）

## 2. 前提条件（セクション2）

### 見積範囲
要件定義書のスコープから以下を抽出：
- 対象システム
- 対象機能の範囲
- 対象ユーザー数
- 含まれるもの/含まれないもの

### 技術前提
非機能要件定義書と要件定義書から：
- 開発言語・フレームワーク
- データベース
- インフラ環境（クラウド/オンプレミス）
- 既存システム連携の有無

### 開発体制
プロジェクト計画書のチーム体制から：
- PM、PL、開発者、テスターの役割定義
- スキルレベル（高/中/初級）
- 作業場所（オンサイト/リモート）

### スケジュール前提
プロジェクト計画書のマイルストーンから：
- 各フェーズの期間
- 主要なマイルストーン
- 納期制約

### リスクと前提
プロジェクト計画書のリスク管理から：
- 仕様変更の取り扱い
- スコープ変更時の対応
- 遅延時の対応

## 3. 工数見積もり基準（セクション3）

### 複雑度分類基準
機能一覧の複雑度分類を参照し、以下の基準を明記：

**画面（SC-XXX）の複雑度基準：**
- 低複雑度：入力項目5個以下、単純な一覧表示、基本的なCRUD
- 中複雑度：入力項目6～15個、検索条件複数、バリデーション複雑、マスタ参照
- 高複雑度：入力項目16個以上、複雑な計算ロジック、複数テーブル連携、動的UI

**バッチ（BT-XXX）の複雑度基準：**
- 低複雑度：単純なデータ抽出、1～2テーブル、ロジックなし
- 中複雑度：データ加工・集計、3～5テーブル、条件分岐あり
- 高複雑度：複雑な計算・集計、6テーブル以上、外部連携、大量データ処理

**API（API-XXX）の複雑度基準：**
- 低複雑度：単純なCRUD、1～2テーブル
- 中複雑度：複数テーブル参照、ビジネスロジック含む
- 高複雑度：複雑なトランザクション、外部API連携、非同期処理

### 工数算出基準
テンプレートの工数見積もり基準表を使用：

**画面開発（人日）：**
| 複雑度 | 設計 | 開発 | 単体テスト | 結合テスト | 合計 |
|--------|------|------|-----------|-----------|------|
| 低     | 0.5  | 2.0  | 1.0       | 0.5       | 4.0  |
| 中     | 1.0  | 4.0  | 2.0       | 1.0       | 8.0  |
| 高     | 2.0  | 8.0  | 4.0       | 2.0       | 16.0 |

**バッチ開発（人日）：**
| 複雑度 | 設計 | 開発 | 単体テスト | 結合テスト | 合計 |
|--------|------|------|-----------|-----------|------|
| 低     | 0.5  | 2.0  | 1.0       | 0.5       | 4.0  |
| 中     | 1.0  | 5.0  | 2.5       | 1.5       | 10.0 |
| 高     | 2.0  | 10.0 | 5.0       | 3.0       | 20.0 |

**API開発（人日）：**
| 複雑度 | 設計 | 開発 | 単体テスト | 結合テスト | 合計 |
|--------|------|------|-----------|-----------|------|
| 低     | 0.3  | 1.0  | 0.5       | 0.2       | 2.0  |
| 中     | 0.5  | 2.0  | 1.0       | 0.5       | 4.0  |
| 高     | 1.0  | 4.0  | 2.0       | 1.0       | 8.0  |

**帳票開発（人日）：**
| 複雑度 | 設計 | 開発 | 単体テスト | 結合テスト | 合計 |
|--------|------|------|-----------|-----------|------|
| 低     | 0.5  | 2.0  | 1.0       | 0.5       | 4.0  |
| 中     | 1.0  | 4.0  | 2.0       | 1.0       | 8.0  |
| 高     | 2.0  | 6.0  | 3.0       | 2.0       | 13.0 |

### 単価設定
テンプレートのスキルレベル別単価を使用：

| スキルレベル | 単価（円/人日） | 対象作業 |
|-------------|----------------|----------|
| 高級（PM/PL） | 100,000 | プロジェクト管理、基本設計、レビュー |
| 中級（SE） | 80,000 | 詳細設計、開発リーダー、複雑な開発 |
| 初級（PG） | 60,000 | 開発、単体テスト |
| テスター | 50,000 | 結合テスト、総合テスト |

## 4. 工数・金額見積もり（セクション4）

機能一覧の各機能（F-XXX）について、以下の手順で工数と金額を算出：

### ステップ1: 機能の抽出
機能一覧から以下を抽出：
- 機能ID（F-XXX）
- 機能名
- カテゴリー（画面/バッチ/API/帳票）
- 複雑度（低/中/高）
- 関連する画面ID（SC-XXX）、バッチID（BT-XXX）、API-ID（API-XXX）、帳票ID（RP-XXX）

### ステップ2: 工数の算出
各機能のカテゴリーと複雑度に基づき、工数見積もり基準表から工数を算出：
- 設計工数
- 開発工数
- 単体テスト工数
- 結合テスト工数
- 小計工数

### ステップ3: 金額の算出
各作業フェーズに適切なスキルレベルの単価を適用：
- 設計：中級SE（80,000円/人日）
- 開発：中級SE（80,000円/人日）または初級PG（60,000円/人日）
- 単体テスト：初級PG（60,000円/人日）
- 結合テスト：テスター（50,000円/人日）

### ステップ4: 見積精度の設定
各機能の見積精度を以下の基準で設定：
- A（±10%）：要件が明確、類似実績あり
- B（±20%）：要件はおおむね明確、一部不確定要素あり
- C（±30%）：要件が不明確、実績なし、技術的チャレンジあり

### ステップ5: 精度タグ（Rough/Refined）の設定
見積分解表の各機能に、未決事項の有無に応じて精度タグを付与：

**精度タグの定義：**
- **Refined（確定）**: 要件が確定済み、未決事項なし、見積精度A/B相当
- **Rough（概算）**: 未決事項が残っている、要件が流動的、見積精度C相当

**タグ付けの基準：**
| 精度タグ | 見積精度 | 未決事項 | 要件確定度 | 使用場面 |
|---------|---------|---------|-----------|---------|
| Refined | A, B | なし | 80%以上確定 | 要件凍結後、契約ベース見積 |
| Rough | C | あり | 50～80%確定 | 要件定義中、暫定見積 |

**見積表への記載例：**
| 機能ID | 機能名 | 精度 | 精度タグ | 工数(人日) | 金額(円) | 未決事項ID | 備考 |
|--------|--------|------|---------|-----------|---------|-----------|------|
| F-001 | ユーザー登録 | A | Refined | 8.0 | 560,000 | - | 要件確定済 |
| F-002 | 承認フロー | B | Refined | 10.0 | 750,000 | - | 2段階承認で合意 |
| F-003 | 月次集計バッチ | C | Rough | 15.0 | 1,050,000 | OP-001 | 締日タイミング未決 |
| F-004 | 外部IF連携 | C | Rough | 20.0 | 1,400,000 | OP-004 | 連携方式未決（API/CSV） |

**精度タグの更新タイミング：**
1. **要件定義フェーズ中**: すべてRoughで開始
2. **ヒアリング後（機能一覧確定）**: 合意された機能をRefinedに更新
3. **ヒアリング後（非機能要件確定）**: 技術仕様確定した機能をRefinedに更新
4. **要件凍結ゲート後**: すべてRefinedに更新（未決事項がゼロになった時点）

**見積精度とタグの対応関係：**
```
精度A → Refined（要件明確、未決事項なし）
精度B → Refined（おおむね明確、一部調整の余地あり）
精度C → Rough（要件不明確、未決事項あり）
```

**予備費への反映：**
- Refined機能の合計 → 予備費5～10%
- Rough機能の合計 → 予備費15～20%
- 全体予備費は両者の加重平均で算出

### 機能別見積表の作成
以下の形式で表を作成：

| 機能ID | 機能名 | カテゴリー | 複雑度 | 設計<br>(人日) | 開発<br>(人日) | 単体テスト<br>(人日) | 結合テスト<br>(人日) | 小計<br>(人日) | 金額<br>(円) | 精度 | 精度タグ | 未決事項ID | 備考 |
|--------|--------|-----------|--------|---------------|---------------|-------------------|-------------------|---------------|-------------|------|---------|-----------|------|
| F-001 | ユーザー登録 | 画面 | 中 | 1.0 | 4.0 | 2.0 | 1.0 | 8.0 | 560,000 | A | Refined | - | SC-001 |
| F-002 | 承認フロー | 画面 | 中 | 1.0 | 4.0 | 2.0 | 1.0 | 8.0 | 560,000 | B | Refined | - | 2段階承認 |
| F-003 | 月次集計 | バッチ | 高 | 2.0 | 10.0 | 5.0 | 3.0 | 20.0 | 1,400,000 | C | Rough | OP-001 | 締日要確認 |
| F-004 | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |

## 5. フェーズ別工数・金額（セクション5）

### フェーズ別の工数配分
要件定義書とプロジェクト計画書のフェーズ定義から、以下のフェーズに分けて集計：

1. **要件定義フェーズ（実施済み）**
   - 機能数を基に算出（機能数 × 0.5人日）
   - ヒアリング、要件整理、ドキュメント作成

2. **基本設計フェーズ**
   - 画面設計書（画面数 × 設計工数）
   - バッチ設計書（バッチ数 × 設計工数）
   - API設計書（API数 × 設計工数）
   - DB設計書（テーブル数 × 0.5人日）
   - 外部IF設計書（IF数 × 1.0人日）

3. **詳細設計フェーズ**
   - セクション4で算出した「設計」工数の合計

4. **開発・単体テストフェーズ**
   - セクション4で算出した「開発」+「単体テスト」工数の合計
   - 環境構築（10人日）
   - コードレビュー（開発工数の10%）

5. **結合テストフェーズ**
   - セクション4で算出した「結合テスト」工数の合計
   - テスト計画書作成（5人日）
   - テストデータ作成（10人日）

6. **総合テストフェーズ**
   - シナリオテスト（機能数 × 1.0人日）
   - 性能テスト（非機能要件から、10～20人日）
   - セキュリティテスト（非機能要件から、5～10人日）

7. **移行・リリースフェーズ**
   - データ移行設計（5人日）
   - データ移行プログラム開発（10～20人日）
   - リハーサル（5人日）
   - 本番移行作業（3人日）

8. **ドキュメント作成**
   - 運用マニュアル（10人日）
   - ユーザーマニュアル（画面数 × 0.3人日）
   - 保守マニュアル（5人日）

9. **プロジェクト管理**
   - 全工数の15～20%

各フェーズについて以下を記載：
| フェーズ | 主要作業 | 工数(人日) | 金額(円) | 期間 | 担当スキルレベル |
|---------|---------|-----------|---------|------|-----------------|
| 要件定義 | ... | ... | ... | ... | PM/SE |
| ... | ... | ... | ... | ... | ... |

## 6. 非機能要件対応（セクション6）

非機能要件定義書から以下の工数を算出：

### インフラ・環境構築
- サーバー構築・設定（10～30人日）
- ネットワーク設定（5～10人日）
- DB構築・チューニング（10～20人日）
- 監視ツール導入（5～10人日）

### セキュリティ対策
- 認証・認可機能実装（非機能要件定義書の要件から、10～30人日）
- 暗号化実装（5～10人日）
- 脆弱性診断対応（10人日）

### 性能対策
- 性能チューニング（非機能要件定義書の性能要件から、10～20人日）
- 負荷テスト（10～15人日）

### 運用準備
- バックアップ・リストア設定（5～10人日）
- 監視設定（5～10人日）
- 運用手順書作成（10人日）

## 7. オプション項目（セクション7）

以下は別見積もりとして記載：
- 追加機能（機能一覧で優先度「低」または「将来対応」とマークされたもの）
- 保守・運用サポート（月額）
- SLA対応
- 追加研修

## 8. リスク・予備費（セクション8）

### リスク評価
要件定義書とプロジェクト計画書のリスク管理から：
- 技術的リスク（新技術、複雑な処理）
- スコープ変更リスク（要件の不確定性）
- スケジュールリスク（短納期、リソース制約）

### 予備費の設定
見積精度と精度タグを考慮して予備費を設定：

**見積精度別の予備費率：**
- 精度A（±10%）の機能合計 → 予備費5%
- 精度B（±20%）の機能合計 → 予備費10%
- 精度C（±30%）の機能合計 → 予備費15%

**精度タグ別の予備費率：**
- Refined機能の合計 → 予備費5～10%（精度A/Bに相当）
- Rough機能の合計 → 予備費15～20%（精度Cに相当）

**予備費算出例：**
```
Refined機能: 500人日 × 7% = 35人日
Rough機能: 200人日 × 18% = 36人日
合計予備費: 71人日（全体工数700人日の約10%）
```

**全体予備費の推奨値：**
- 要件定義フェーズ中（Rough多数）: 合計工数の15～20%
- 要件凍結後（Refined多数）: 合計工数の10%
- 契約時（全Refined）: 合計工数の5～10%

## 9. 見積サマリー（セクション9）

### 工数サマリー
| 大項目 | 小計工数(人日) | 小計金額(円) | 比率(%) |
|--------|---------------|-------------|---------|
| 機能開発 | XXX | XXX | XX% |
| 非機能要件対応 | XXX | XXX | XX% |
| テスト | XXX | XXX | XX% |
| 移行・リリース | XXX | XXX | XX% |
| ドキュメント | XXX | XXX | XX% |
| プロジェクト管理 | XXX | XXX | XX% |
| **小計** | **XXX** | **XXX** | **100%** |
| 予備費（10%） | XXX | XXX | - |
| **合計** | **XXX** | **XXX** | - |

### 金額サマリー
- 小計金額：XXX円
- 予備費（10%）：XXX円
- 消費税（10%）：XXX円
- **合計金額：XXX円**

## 10. 支払条件（セクション10）

プロジェクト計画書のマイルストーンに基づき、支払いスケジュールを設定：

| 支払タイミング | マイルストーン | 支払割合 | 金額(円) | 支払期日 |
|--------------|--------------|---------|---------|---------|
| 契約時 | 契約締結 | 10% | XXX | 契約後7日以内 |
| 基本設計完了時 | 基本設計レビュー完了 | 20% | XXX | 成果物承認後7日以内 |
| 開発完了時 | 結合テスト完了 | 30% | XXX | 成果物承認後7日以内 |
| 総合テスト完了時 | 総合テスト完了 | 20% | XXX | 成果物承認後7日以内 |
| 本番リリース完了時 | 本番稼働確認 | 20% | XXX | 稼働確認後7日以内 |

## 11. 見積有効期限と変更条件（セクション11）

- 見積有効期限：見積書発行日から3ヶ月
- 前提条件変更時の見積見直し条件を明記
- スコープ変更時の追加見積もりプロセスを記載

---

# 作成時の注意事項

1. **機能一覧との整合性**
   - 機能一覧のすべての機能が見積もりに含まれているか確認
   - 機能ID（F-XXX）、画面ID（SC-XXX）などのトレーサビリティを維持

2. **複雑度の根拠**
   - 機能一覧の複雑度分類を尊重
   - 複雑度の判断が不明確な場合は備考欄に根拠を記載

3. **工数の妥当性**
   - 類似プロジェクトの実績と比較
   - 過度に楽観的な見積もりを避ける
   - 不確定要素は予備費で吸収

4. **スキルレベルの適切な設定**
   - 各作業に適切なスキルレベルを設定
   - 複雑な機能は中級SE、単純な機能は初級PGなど

5. **非機能要件の反映**
   - 性能要件、セキュリティ要件、運用要件が工数に反映されているか確認

6. **プロジェクト管理工数の確保**
   - 全体の15～20%を確保
   - プロジェクト規模に応じて調整

7. **予備費の設定**
   - リスクに応じた適切な予備費率
   - 最低でも全体の10%を確保

8. **支払条件の妥当性**
   - マイルストーンと支払タイミングの整合性
   - キャッシュフローを考慮

---

# 作成後のチェックリスト

□ すべての機能が見積もりに含まれている
□ 工数見積もり基準が明確である
□ 複雑度分類が適切である
□ スキルレベル別単価が設定されている
□ フェーズ別の工数が算出されている
□ 非機能要件対応の工数が含まれている
□ プロジェクト管理工数が確保されている
□ 予備費が設定されている
□ 支払条件が明確である
□ 見積有効期限が設定されている
□ 機能IDなどトレーサビリティが確保されている
□ 金額の合計が正しく計算されている

---

# 出力形式

「07_見積書テンプレート.md」の構成に従い、Markdown形式で出力してください。
```

## 使用例

```
# インプット情報

## 1. 要件定義書
[要件定義書の内容]

## 2. 機能一覧
[機能一覧の内容]

## 3. 非機能要件定義書
[非機能要件定義書の内容]

## 4. プロジェクト計画書
[プロジェクト計画書の内容]

---

[上記プロンプトを適用]
```
