# システム構成図作成プロンプト

## 目的
要件定義書の内容を基に、システムの全体構成を視覚化し、技術的な実装方針を明確にするシステム構成図を作成します。

## インプット
以下の要件定義書を読み込んでください：
```
[要件定義書のパスまたは内容を貼り付け]
```

## 出力指示
`03_開発工程/テンプレート/システム構成図.md` のテンプレートを使用して、以下の観点でシステム構成図を作成してください。

## 作成ガイドライン

### 1. 要件定義書の分析
まず、以下の情報を要件定義書から抽出してください：
- **機能要件**: どのような機能が必要か
- **非機能要件**: 性能、可用性、セキュリティ要件
- **外部システム連携**: 連携が必要な外部システム
- **ユーザー種別**: アクセスするユーザーの種類と数
- **データ量**: 想定されるデータ量やトランザクション量

### 2. システム構成の決定方針

#### 2.1 アーキテクチャパターンの選定
要件に応じて適切なアーキテクチャを選択：
- **3層アーキテクチャ**: 標準的なWebアプリケーション
- **マイクロサービス**: 大規模・複雑なシステム
- **サーバーレス**: スケーラビリティ重視
- **モノリシック**: 小規模・シンプルなシステム

理由と共に記載してください。

#### 2.2 技術スタックの選定
各レイヤーで使用する技術を要件から導出：
- **フロントエンド**: 要件のUI/UX要求から判断
- **バックエンド**: 処理の複雑さ、パフォーマンス要件から判断
- **データベース**: データ構造、トランザクション要件から判断
- **インフラ**: コスト、スケーラビリティ、運用要件から判断

#### 2.3 非機能要件への対応
要件定義書の非機能要件に対する構成を明記：
- **可用性目標**: SLA/SLOに応じた冗長化構成
- **性能目標**: レスポンスタイム、スループットを満たす構成
- **セキュリティ要件**: 認証、暗号化、アクセス制御の実装方式
- **拡張性**: 将来の成長を見込んだスケーリング方針

### 3. 各セクションの作成指示

#### 3.1 概要 (セクション2)
- システムの目的と範囲を要件定義書から引用
- 参照ドキュメントに要件定義書を明記

#### 3.2 システム全体構成図 (セクション3)
- **論理構成図**: レイヤー間の関係を図示（テキストまたはMermaid形式）
- **物理構成図**: サーバー、ネットワーク機器の配置を図示
- 要件定義書の機能一覧を各レイヤーに割り当て

#### 3.3 レイヤー別構成 (セクション4)
各レイヤーで必要なコンポーネントを列挙：
- プレゼンテーション層: 画面要件から必要なコンポーネント
- アプリケーション層: 業務ロジックを処理するコンポーネント
- データ層: データ要件から必要なDB、ストレージ
- 外部連携層: 外部システム連携要件から連携方式を決定

#### 3.4 ネットワーク構成 (セクション5)
- セキュリティ要件に応じたセグメント分割
- ファイアウォールルールの設計
- 通信フローの定義（どのコンポーネント間で通信が発生するか）

#### 3.5 インフラ構成 (セクション6)
- **サーバー構成**: 性能要件からスペックを算出
- **ストレージ構成**: データ量要件から容量を算出
- **ミドルウェア構成**: 選定した技術スタックを反映
- クラウド/オンプレミスの選択理由を要件から説明

#### 3.6 可用性・拡張性 (セクション7)
- **冗長化**: 可用性要件（例: 99.9%）を満たす構成
- **負荷分散**: アクセス数要件から必要性を判断
- **スケーリング**: 成長予測に応じた方針

#### 3.7 セキュリティ構成 (セクション8)
要件定義書のセキュリティ要件を具体的な対策に落とし込み：
- データ暗号化（転送時、保管時）
- 認証・認可方式
- アクセス制御
- 監査ログ

#### 3.8 監視・ログ (セクション9)
- 運用要件から必要な監視項目を抽出
- 障害検知のためのしきい値設定
- ログの保管期間（法的要件、運用要件から決定）

#### 3.9 バックアップ・リカバリ (セクション10)
- **RTO/RPO**: 要件定義書から目標値を引用
- バックアップ方式と頻度の決定
- リカバリ手順の概要

#### 3.10 開発・運用環境 (セクション11)
- 環境構成（開発、ステージング、本番）
- CI/CDパイプラインの概要
- デプロイ方式

### 4. 記載時の注意事項

#### 具体性
- 「適切に設計する」などの抽象表現は避け、具体的な技術名、数値を記載
- 例: ✗「高可用性を実現」→ ✓「アクティブ-スタンバイ構成により99.9%の可用性を実現」

#### 要件との紐付け
- 各設計判断の根拠を要件定義書の該当箇所と紐付け
- 例: 「要件定義書3.2.1の性能要件（同時接続1000ユーザー）を満たすため、Webサーバーを2台構成」

#### 実現可能性
- 技術的に実現可能な構成を提示
- 実績のある技術スタックを優先
- 新技術を採用する場合は理由を明記

#### 一貫性
- レイヤー間の整合性を確保（例: API設計と通信フロー）
- 用語の統一（コンポーネント名、サーバー名など）

### 5. チェックリスト
作成後、以下を確認してください：

- [ ] 要件定義書の全機能要件がいずれかのレイヤーに割り当てられている
- [ ] 非機能要件（性能、可用性、セキュリティ）に対する具体的な対策が記載されている
- [ ] 外部システム連携要件が外部連携層に反映されている
- [ ] システム構成図が論理構成・物理構成の両方で記載されている
- [ ] 選定した技術スタックの理由が明確である
- [ ] RTO/RPOの目標値が要件と一致している
- [ ] セキュリティ対策が要件を満たしている
- [ ] スケーラビリティが考慮されている
- [ ] コストの妥当性が考慮されている（必要に応じて）

## 出力形式
- テンプレートの構造を維持
- 各項目を過不足なく埋める
- 表は見やすく整形
- 図は可能な限り視覚的にわかりやすく

## 最終出力先
`03_開発工程/システム構成図.md` に保存してください。
