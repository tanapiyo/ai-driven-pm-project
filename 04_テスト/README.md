# Phase 4: テスト（Testing & Quality Assurance）

## 概要

Phase 3で作成した設計書をもとに、システムのテスト計画を立案し、テストケースを作成します。開発と並行してテスト準備を進め、受入テストまでの品質保証プロセスを確立します。

## 期間

- **標準**: 2〜3ヶ月（開発と並行して進行）
- **テストフェーズ**: 単体テスト → 結合テスト → システムテスト → 受入テスト

## このフェーズで作成する成果物

1. **テスト計画書**: テスト戦略、スコープ、スケジュール、体制
2. **テスト観点一覧**: テスト視点のチェックリスト
3. **機能テストケース**: 機能ごとの正常系・異常系テストケース
4. **非機能テストケース**: 性能、セキュリティ、運用テストケース
5. **テスト結果報告書**: テスト実施結果のサマリー
6. **受入基準書**: 本番リリース判定基準
7. **検収計画書**: 顧客による受入テスト計画

## テストドキュメント作成の順序

```
1. テスト計画書 ← 全体の戦略とスケジュール
     ↓
2. テスト観点一覧 ← テスト視点の網羅性確認
     ↓
3. 機能テストケース ← 機能要件のテスト
     ↓
4. 非機能テストケース ← 非機能要件のテスト
     ↓
（開発・テスト実施）
     ↓
5. テスト結果報告書 ← テスト実施後のレポート
     ↓
6. 検収計画書 ← 受入テストの準備
```

## ワークフロー

### Step 1: テスト計画書の作成

**目的**:
- テスト戦略の策定（どのレベルで何をテストするか）
- テストスコープの明確化（テスト対象・対象外）
- テスト体制・スケジュールの計画

**使用プロンプト**:
- [`テスト計画書.md`](./プロンプト/テスト計画書.md)

**使用テンプレート**:
- [`テスト計画書.md`](./テンプレート/テスト計画書.md)

**入力**:
- Phase 2の要件定義書、WBS
- Phase 3の設計書（システム構成図、DB設計、API設計、画面設計）

**レビューポイント**:
- [ ] テストレベル（単体/結合/システム/受入）が定義されているか
- [ ] テスト環境の準備計画は明確か
- [ ] テスト体制（役割分担）は明確か
- [ ] テストスケジュールは実現可能か

---

### Step 2: テスト観点一覧の作成

**目的**:
- テストの抜け漏れを防ぐためのチェックリスト作成
- 機能面・非機能面の観点を網羅的に整理

**使用プロンプト**:
- [`テスト観点一覧.md`](./プロンプト/テスト観点一覧.md)

**使用テンプレート**:
- テンプレートなし（プロンプトから直接生成）

**入力**:
- Phase 2の要件定義書、非機能要件
- Phase 3の設計書

**テスト観点の例**:
- **機能観点**: 正常系、異常系、境界値、網羅性
- **性能観点**: レスポンスタイム、スループット、同時接続
- **セキュリティ観点**: 認証、認可、脆弱性、データ保護
- **運用観点**: バックアップ/リストア、監視、障害復旧

**レビューポイント**:
- [ ] 要件定義の全項目がテスト観点に含まれているか
- [ ] 非機能要件がテスト観点に含まれているか
- [ ] リスクの高い領域が重点的にカバーされているか

---

### Step 3: 機能テストケースの作成

**目的**:
- 機能要件を満たすかを検証するテストケース作成
- 正常系・異常系・境界値テストのケース設計

**使用プロンプト**:
- [`機能テストケース.md`](./プロンプト/機能テストケース.md)

**使用テンプレート**:
- [`テストケース.md`](./テンプレート/テストケース.md)

**入力**:
- Phase 2の機能一覧、ユースケース
- Phase 3の画面設計、API設計

**テストケースの構成要素**:
- テストID、テスト項目名
- 前提条件、テスト手順
- 期待結果、実測結果（実施後）
- 優先度（高/中/低）

**レビューポイント**:
- [ ] 全機能がテストケースでカバーされているか
- [ ] 正常系・異常系が網羅されているか
- [ ] 境界値テストが含まれているか
- [ ] テスト手順は明確で再現可能か

---

### Step 4: 非機能テストケースの作成

**目的**:
- 性能、セキュリティ、運用要件を検証するテストケース作成

**使用プロンプト**:
- [`非機能テストケース.md`](./プロンプト/非機能テストケース.md)

**使用テンプレート**:
- [`テストケース.md`](./テンプレート/テストケース.md)

**入力**:
- Phase 2の非機能要件
- Phase 3の運用設計、システム構成図

**非機能テストの種類**:
- **性能テスト**: 負荷テスト、ストレステスト、スパイクテスト
- **セキュリティテスト**: 脆弱性診断、ペネトレーションテスト
- **運用テスト**: バックアップ/リストア、監視アラート、障害復旧

**レビューポイント**:
- [ ] 非機能要件の全項目がテストケースでカバーされているか
- [ ] 性能目標値が明確に定義されているか
- [ ] セキュリティリスクがカバーされているか

---

### Step 5: テスト結果報告書の作成

**目的**:
- テスト実施後の結果をまとめた報告書作成
- バグ・不具合の状況、修正状況をトラッキング

**使用プロンプト**:
- [`テスト結果報告書.md`](./プロンプト/テスト結果報告書.md)

**使用テンプレート**:
- テンプレートなし（プロンプトから直接生成）

**入力**:
- テストケース（実施結果含む）
- バグ管理表

**報告書の内容**:
- テスト実施サマリー（実施数、合格/不合格数）
- バグ件数（重要度別、ステータス別）
- 未解決バグのリスク評価
- 次フェーズへの推奨事項

**レビューポイント**:
- [ ] テストカバレッジは目標を達成しているか
- [ ] 致命的なバグは全て修正されているか
- [ ] 未解決バグのリスクは許容範囲か

---

### Step 6: 検収計画書の作成

**目的**:
- 顧客による受入テスト（UAT: User Acceptance Test）の計画作成
- 本番リリース判定基準の明確化

**使用プロンプト**:
- [`検収計画書作成.md`](./プロンプト/検収計画書作成.md)

**使用テンプレート**:
- [`検収計画書.md`](./テンプレート/検収計画書.md)
- [`受入基準書.md`](./テンプレート/受入基準書.md)

**入力**:
- Phase 2の要件定義書
- テスト結果報告書

**検収の流れ**:
1. 受入テスト環境の準備
2. 顧客による受入テスト実施
3. 不具合の修正と再テスト
4. 受入基準の達成確認
5. 本番リリース承認

**レビューポイント**:
- [ ] 受入基準は明確で測定可能か
- [ ] 顧客の受入テスト環境は準備されているか
- [ ] リリース判定基準は合意されているか

## プロンプト・テンプレート一覧

| 順序 | プロンプト名 | テンプレート名 | 目的 | 入力 |
|-----|------------|-------------|------|------|
| 1 | [テスト計画書](./プロンプト/テスト計画書.md) | [テスト計画書](./テンプレート/テスト計画書.md) | テスト戦略・計画 | 要件定義書、設計書 |
| 2 | [テスト観点一覧](./プロンプト/テスト観点一覧.md) | - | テスト観点の網羅 | 要件定義書、設計書 |
| 3 | [機能テストケース](./プロンプト/機能テストケース.md) | [テストケース](./テンプレート/テストケース.md) | 機能テスト設計 | 機能一覧、ユースケース |
| 4 | [非機能テストケース](./プロンプト/非機能テストケース.md) | [テストケース](./テンプレート/テストケース.md) | 非機能テスト設計 | 非機能要件、運用設計 |
| 5 | [テスト結果報告書](./プロンプト/テスト結果報告書.md) | - | テスト結果サマリー | テストケース（実施後） |
| 6 | [検収計画書作成](./プロンプト/検収計画書作成.md) | [検収計画書](./テンプレート/検収計画書.md)、[受入基準書](./テンプレート/受入基準書.md) | 受入テスト計画 | 要件定義書、テスト結果 |

## フェーズ完了条件（ゲートレビュー: 受入準備完了）

以下の条件を満たすと受入テスト（検収）に進めます:

- [ ] **テストカバレッジ完了**: 機能要件・非機能要件のテストが完了している
- [ ] **トレーサビリティ検証**: 要件→設計→テストケースの紐付けが確認されている
- [ ] **致命的バグゼロ**: 重要度高のバグが全て修正されている
- [ ] **性能要件達成**: 非機能要件（性能）が満たされている
- [ ] **受入基準合意**: 顧客と受入基準について合意している

## 次のフェーズ

Phase 5: デリバリー（受入テスト・本番リリース）

## 前のフェーズ

[Phase 3: 設計・開発準備](../03_開発工程/README.md)

## 参考資料

- [プロジェクト全体の流れ](../00_docs/全体の流れ（受託開発）.md)
- [CLAUDE.md（リポジトリ全体ガイド）](../CLAUDE.md)

## Tips

### テストレベルの定義
- **単体テスト**: 関数・クラス単位（開発者が実施）
- **結合テスト**: モジュール間連携（開発者が実施）
- **システムテスト**: システム全体（QAチームが実施）
- **受入テスト**: 顧客要件の確認（顧客が実施）

### テストカバレッジの目標
- **機能テスト**: 100%（全機能をテスト）
- **コードカバレッジ**: 80%以上（単体テスト）
- **パステスト**: 主要ユースケースの全パス

### バグ管理の重要度
- **致命的**: システムが動作しない、データ損失の可能性
- **重大**: 主要機能が使えない、回避策なし
- **中**: 機能に支障があるが回避策あり
- **軽微**: UI/UXの改善要望、誤字脱字

### テスト自動化の推奨
- **単体テスト**: JUnit、pytest、Jest等で自動化
- **API テスト**: Postman、REST Assured等で自動化
- **E2Eテスト**: Selenium、Playwright、Cypress等で自動化
- **性能テスト**: JMeter、Gatling、Locust等で自動化

### トレーサビリティマトリクス
要件からテストケースまでの対応表を作成:
```
要件ID → 設計ID → テストケースID
REQ-001 → DES-005 → TC-010, TC-011
REQ-002 → DES-006 → TC-012, TC-013
```
