# 課題・リスク分析プロンプト

## 目的

プロジェクトで発生した課題・リスクを分析し、優先度付け・対応策提案・エスカレーション判定を自動的に行う。

---

## プロンプト本文

```
あなたはITプロジェクトのPMアシスタントです。
以下の課題・リスク情報を分析し、優先度付け・対応策提案・エスカレーション判定を行ってください。

# プロジェクト情報
**プロジェクト名**: {プロジェクト名}
**現在のフェーズ**: {要件定義/基本設計/詳細設計/開発/テスト}
**次のマイルストーン**: {マイルストーン名}（{残り日数}日）
**プロジェクト制約条件**:
- 予算: {予算総額}万円（残り{残額}万円）
- 納期: {最終納期}（残り{残り日数}日）
- 品質基準: {品質基準}

---

## 課題一覧

### 新規課題（今週発生）

{課題ID}: {課題内容}
- 発生日: {YYYY/MM/DD}
- 発見者: {発見者名}
- 現在の状況: {詳細}
- 影響範囲: {どの工程・成果物に影響するか}

{課題ID}: {課題内容}
...

### 既存課題（未解決）

{課題ID}: {課題内容}
- 発生日: {YYYY/MM/DD}
- 経過日数: {X}日
- 現在の対応状況: {対応中/保留/検討中}
- これまでの対応: {対応履歴}

---

## リスク一覧

### 新規リスク（今週認識）

{リスクID}: {リスク内容}
- 認識日: {YYYY/MM/DD}
- トリガー（何がきっかけで顕在化するか）: {トリガー}
- 発生時期予測: {いつ頃発生しそうか}

{リスクID}: {リスク内容}
...

### 既存リスク（監視中）

{リスクID}: {リスク内容}
- 認識日: {YYYY/MM/DD}
- 発生確率: {高/中/低}
- 影響度: {高/中/低}
- 現在の対応策: {対応策}

---

## 分析要件

### 1. 課題の優先度付け

以下の基準で優先度を判定してください：

**優先度の判定基準**:

| 優先度 | 条件 | 対応期限 |
|-------|------|---------|
| 高 | ・マイルストーンに直接影響<br>・予算超過リスクあり<br>・品質基準を満たせない<br>・顧客への影響が大きい | 即日〜3日以内 |
| 中 | ・一部機能に影響<br>・代替策があるが時間がかかる<br>・将来的に拡大する可能性 | 1週間以内 |
| 低 | ・影響が限定的<br>・ワークアラウンドで対応可能<br>・優先度の高いタスクに影響しない | 2週間以内 |

**出力形式**（表形式）:
| 課題ID | 課題内容 | 優先度 | 理由 | 影響範囲 | 対応期限 |
|--------|---------|--------|------|---------|---------|
| {ID} | {要約} | 高/中/低 | {判定理由} | {影響範囲} | YYYY/MM/DD |

### 2. 課題の対応策提案

各課題に対して、以下の情報を含む対応策を提案してください：

**対応策の要素**:
- **即効性のある対策**: すぐに実施できる対応
- **根本的な対策**: 再発防止のための対策
- **必要なリソース**: 人員、予算、ツールなど
- **想定所要時間**: 対策実施にかかる時間
- **リスク**: 対策実施に伴うリスク

**出力形式**（表形式）:
| 課題ID | 即効対策 | 根本対策 | 必要リソース | 所要時間 | 実施リスク |
|--------|---------|---------|------------|---------|-----------|
| {ID} | {対策} | {対策} | {リソース} | {時間} | {リスク} |

### 3. リスクの定量評価

以下の基準でリスク値を算出してください：

**発生確率の定義**:
- 高（80-100%）: ほぼ確実に発生する
- 中（40-70%）: 発生する可能性がある
- 低（10-30%）: 発生する可能性は低いが無視できない

**影響度の定義（1-10スケール）**:
- 10: プロジェクト中止レベル
- 8-9: 重大な遅延（1ヶ月以上）または予算超過（20%以上）
- 5-7: 中程度の遅延（1-4週間）または予算超過（10-20%）
- 3-4: 軽微な遅延（数日）または予算超過（5-10%）
- 1-2: ほぼ影響なし

**リスク値の計算**:
```
リスク値 = 発生確率(%) ÷ 100 × 影響度(1-10)

例: 発生確率50%、影響度8の場合
リスク値 = 0.5 × 8 = 4.0
```

**リスクレベルの判定**:
- リスク値 ≥ 5.0 → 🔴 高リスク（要対策）
- リスク値 3.0-5.0 → 🟡 中リスク（監視）
- リスク値 < 3.0 → 🟢 低リスク（記録のみ）

**出力形式**（表形式）:
| リスクID | リスク内容 | 発生確率 | 影響度 | リスク値 | レベル | 対応策 | 担当者 |
|---------|-----------|---------|--------|---------|--------|--------|--------|
| {ID} | {要約} | XX% | X | X.X | 🔴/🟡/🟢 | {対応策} | {担当者} |

### 4. エスカレーション判定

以下の基準でエスカレーション要否を判定してください：

**エスカレーション必要（顧客・上位管理者への報告必須）**:
- 課題の優先度が「高」で、3日以内に解決見込みがない
- リスク値 ≥ 5.0（高リスク）
- 予算超過またはスケジュール遅延が確定
- 品質基準を満たせない可能性が高い
- 顧客の意思決定が必要

**エスカレーション不要（チーム内で対応可能）**:
- 課題の優先度が「中」「低」
- リスク値 < 5.0
- チーム内のリソースで解決可能
- 影響が限定的

**出力形式**（表形式）:
| 課題/リスクID | エスカレーション要否 | 理由 | 報告先 | 報告期限 | 報告内容 |
|-------------|------------------|------|--------|---------|---------|
| {ID} | 要/否 | {理由} | {顧客/上位管理者/社内のみ} | YYYY/MM/DD | {報告すべき内容} |

---

## 出力形式

以下のMarkdown形式で出力してください：

\`\`\`markdown
## 課題・リスク分析レポート

**分析日**: YYYY/MM/DD
**プロジェクト**: {プロジェクト名}
**フェーズ**: {現在のフェーズ}

---

### 1. 課題分析

#### 1.1 優先度別サマリー

| 優先度 | 件数 | 主な内容 |
|--------|------|---------|
| 高 | X件 | {主要な課題を列挙} |
| 中 | X件 | {主要な課題を列挙} |
| 低 | X件 | {主要な課題を列挙} |

#### 1.2 課題詳細（優先度順）

| 課題ID | 課題内容 | 優先度 | 理由 | 影響範囲 | 対応期限 |
|--------|---------|--------|------|---------|---------|
| ... | ... | ... | ... | ... | ... |

#### 1.3 対応策提案

| 課題ID | 即効対策 | 根本対策 | 必要リソース | 所要時間 | 実施リスク |
|--------|---------|---------|------------|---------|-----------|
| ... | ... | ... | ... | ... | ... |

---

### 2. リスク分析

#### 2.1 リスクレベル別サマリー

| リスクレベル | 件数 | 主な内容 |
|-------------|------|---------|
| 🔴 高リスク | X件 | {主要なリスクを列挙} |
| 🟡 中リスク | X件 | {主要なリスクを列挙} |
| 🟢 低リスク | X件 | {主要なリスクを列挙} |

#### 2.2 リスク詳細（リスク値順）

| リスクID | リスク内容 | 発生確率 | 影響度 | リスク値 | レベル | 対応策 | 担当者 |
|---------|-----------|---------|--------|---------|--------|--------|--------|
| ... | ... | XX% | X | X.X | 🔴/🟡/🟢 | ... | ... |

---

### 3. エスカレーション判定

#### 3.1 即時エスカレーション必要（優先度：高）

| 課題/リスクID | エスカレーション要否 | 理由 | 報告先 | 報告期限 | 報告内容 |
|-------------|------------------|------|--------|---------|---------|
| ... | 要 | ... | ... | YYYY/MM/DD | ... |

#### 3.2 監視継続（エスカレーション不要）

| 課題/リスクID | 理由 | チーム内対応策 |
|-------------|------|--------------|
| ... | ... | ... |

---

### 4. 推奨アクション（優先度順）

1. **【至急】** {課題ID}: {アクション内容}（期限: YYYY/MM/DD、担当: {担当者}）
2. **【重要】** {リスクID}: {アクション内容}（期限: YYYY/MM/DD、担当: {担当者}）
3. ...

---

### 5. PMへの提言

{プロジェクト全体の状況を踏まえた提言}
- 総合的なプロジェクトステータス（🟢順調/🟡注意/🔴危機）
- 最も注意すべきリスク
- 次週の重点対応事項
\`\`\`

---

## 補足指示

1. **客観的な判断**:
   - 感情的な表現を避け、事実とデータに基づいて分析
   - 楽観的にならず、リスクは保守的に評価

2. **具体的な対応策**:
   - 抽象的な提案ではなく、具体的なアクションを提示
   - 担当者、期限、成果物を明記

3. **顧客への影響を重視**:
   - 技術的な課題でも、ビジネスへの影響に焦点
   - 顧客にどう説明するかを考慮

4. **トレンド分析**:
   - 過去の課題・リスクデータがある場合は傾向を分析
   - 「課題が増加傾向」「リスクが減少傾向」などのコメント

5. **ポジティブな表現**:
   - 課題があっても「解決可能」という前向きなトーン
   - 対策を明示することで安心感を提供
```

---

## 使用例

### 入力例

**プロジェクト情報**:
- プロジェクト名: 在庫管理システム刷新
- 現在のフェーズ: 基本設計
- 次のマイルストーン: 基本設計完了（残り10日）
- 予算: 1,500万円（残り900万円）
- 納期: 2025/12/31（残り60日）

**課題一覧**:
- ISS-001: DB設計が仕様未確定で3日遅延中
- ISS-002: テストサーバーが不安定で検証が進まない
- ISS-003: UIデザインレビューで20件の修正指摘

**リスク一覧**:
- RSK-001: キーメンバー（開発リーダー）が来月退職予定
- RSK-002: 外部APIの仕様変更が予告されている（3ヶ月後）
- RSK-003: 顧客側の承認が遅れがち

### 出力例

```markdown
## 課題・リスク分析レポート

**分析日**: 2025/10/25
**プロジェクト**: 在庫管理システム刷新
**フェーズ**: 基本設計

---

### 1. 課題分析

#### 1.1 優先度別サマリー

| 優先度 | 件数 | 主な内容 |
|--------|------|---------|
| 高 | 1件 | DB設計遅延（マイルストーン影響） |
| 中 | 1件 | テストサーバー不安定 |
| 低 | 1件 | UIデザイン修正 |

#### 1.2 課題詳細（優先度順）

| 課題ID | 課題内容 | 優先度 | 理由 | 影響範囲 | 対応期限 |
|--------|---------|--------|------|---------|---------|
| ISS-001 | DB設計遅延（3日） | 高 | 基本設計完了マイルストーン（残り10日）に直接影響 | 基本設計全体、後続のAPI設計 | 2025/10/27 |
| ISS-002 | テストサーバー不安定 | 中 | 検証作業に影響するが代替環境で対応可能 | テスト工程 | 2025/11/1 |
| ISS-003 | UIデザイン修正20件 | 低 | 詳細設計フェーズで対応可能、機能に影響なし | UI詳細設計 | 2025/11/5 |

#### 1.3 対応策提案

| 課題ID | 即効対策 | 根本対策 | 必要リソース | 所要時間 | 実施リスク |
|--------|---------|---------|------------|---------|-----------|
| ISS-001 | 緊急仕様確認MTG開催（顧客+PM+DB担当）、暫定仕様で設計継続 | 仕様確定プロセスの見直し、事前確認チェックリスト導入 | PM 1日、顧客 0.5日 | 2日 | 暫定仕様での進行リスク（後戻り可能性） |
| ISS-002 | クラウド環境で代替サーバー構築 | サーバー監視体制強化、冗長化 | クラウド費用 5万円/月 | 3日 | コスト増加 |
| ISS-003 | 詳細設計フェーズで順次対応 | デザインレビュー基準の明確化 | デザイナー 3日 | 1週間 | なし |

---

### 2. リスク分析

#### 2.1 リスクレベル別サマリー

| リスクレベル | 件数 | 主な内容 |
|-------------|------|---------|
| 🔴 高リスク | 1件 | キーメンバー退職 |
| 🟡 中リスク | 2件 | 外部API仕様変更、顧客承認遅延 |
| 🟢 低リスク | 0件 | - |

#### 2.2 リスク詳細（リスク値順）

| リスクID | リスク内容 | 発生確率 | 影響度 | リスク値 | レベル | 対応策 | 担当者 |
|---------|-----------|---------|--------|---------|--------|--------|--------|
| RSK-001 | 開発リーダー退職 | 90% | 8 | 7.2 | 🔴 | 引継ぎ計画策定、後任育成、外部リソース確保 | PM |
| RSK-002 | 外部API仕様変更 | 50% | 6 | 3.0 | 🟡 | API提供元と情報交換、移行計画策定 | 開発リーダー |
| RSK-003 | 顧客承認遅延 | 60% | 5 | 3.0 | 🟡 | 承認プロセス簡素化提案、事前調整強化 | PM |

---

### 3. エスカレーション判定

#### 3.1 即時エスカレーション必要（優先度：高）

| 課題/リスクID | エスカレーション要否 | 理由 | 報告先 | 報告期限 | 報告内容 |
|-------------|------------------|------|--------|---------|---------|
| ISS-001 | 要 | マイルストーン遅延リスク、顧客の意思決定必要 | 顧客、上位管理者 | 2025/10/26 | DB設計の仕様未確定による遅延、緊急MTG開催依頼 |
| RSK-001 | 要 | 高リスク値（7.2）、プロジェクト体制への重大影響 | 上位管理者、営業 | 2025/10/28 | キーメンバー退職による体制変更、後任確保の支援依頼 |

#### 3.2 監視継続（エスカレーション不要）

| 課題/リスクID | 理由 | チーム内対応策 |
|-------------|------|--------------|
| ISS-002 | 代替環境で対応可能 | クラウド環境での検証環境構築 |
| ISS-003 | 影響が限定的 | 詳細設計フェーズで計画的に対応 |
| RSK-002 | 発生まで3ヶ月の猶予 | API提供元と継続的に情報交換 |
| RSK-003 | 承認プロセス改善で対応可能 | 事前調整の徹底 |

---

### 4. 推奨アクション（優先度順）

1. **【至急】** ISS-001: 顧客との緊急仕様確認MTG開催（期限: 10/26、担当: PM）
2. **【至急】** RSK-001: 開発リーダー引継ぎ計画策定、後任候補選定（期限: 10/28、担当: PM + 上位管理者）
3. **【重要】** ISS-002: 代替テストサーバー構築（期限: 10/30、担当: インフラ担当）
4. **【重要】** RSK-003: 顧客承認プロセス改善提案（期限: 11/1、担当: PM）
5. **【通常】** ISS-003: UIデザイン修正計画策定（期限: 11/5、担当: デザイナー）
6. **【監視】** RSK-002: API提供元への情報確認（期限: 11/10、担当: 開発リーダー）

---

### 5. PMへの提言

**総合ステータス**: 🟡 注意（高リスク1件、高優先度課題1件あり）

**最も注意すべきリスク**:
- RSK-001（開発リーダー退職、リスク値7.2）が最重要。即座に引継ぎ計画を策定し、後任育成または外部リソース確保を進める必要があります。

**次週の重点対応事項**:
1. ISS-001（DB設計遅延）の早期解決：顧客との緊急MTGで仕様確定
2. RSK-001（キーメンバー退職）の対策：引継ぎ計画策定、後任確保
3. 基本設計マイルストーン（残り10日）の達成可能性再評価

**プロジェクト全体への影響**:
- 現時点では基本設計完了マイルストーンに3日の遅延リスクあり
- 予算は順調（消化率40%、進捗率40%）
- キーメンバー退職リスクが顕在化すると、後続工程に重大な影響
```

---

## Git履歴との連携（オプション）

課題・リスクをGitのissue/PRと連携している場合、以下のコマンドでデータ取得可能：

```bash
# GitHub Issuesから課題取得
gh issue list --label "bug,blocker" --json number,title,createdAt,assignees,labels

# 未解決の課題
gh issue list --state open --json number,title,createdAt,labels

# リスク管理ラベル付きissue
gh issue list --label "risk" --json number,title,createdAt,body
```

---

## まとめ

このプロンプトを使用することで：

1. ✅ **客観的な優先度付け**: 影響範囲と緊急度に基づいた明確な基準
2. ✅ **具体的な対応策**: すぐに実行できるアクションプラン
3. ✅ **リスクの定量化**: 発生確率と影響度によるリスク値算出
4. ✅ **適切なエスカレーション**: 報告すべき事項と社内対応の区別

**次のステップ**:
- 週次で課題・リスクを棚卸し
- 進捗報告書のセクション6-7に反映
- 高リスク項目は即座にエスカレーション
