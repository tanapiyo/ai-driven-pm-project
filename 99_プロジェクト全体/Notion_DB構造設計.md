# Notion DB 構造設計

本ドキュメントは、AI駆動型プロジェクト管理で使用するNotion データベースの構造を定義する。

---

## 1. 質問管理DB (Questions Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| 質問ID | Title | ✓ | Q-XXX | 一意な質問ID (例: Q-001) |
| 起票日 | Date | ✓ | YYYY/MM/DD | 質問が起票された日 |
| 質問者 | Person |  |  | 質問を起票した担当者 |
| カテゴリ | Select | ✓ | 要件/仕様/データ/技術/環境/スケジュール/その他 | 質問の分類 |
| 質問内容 | Text | ✓ |  | 質問の詳細内容 |
| 回答期限 | Date | ✓ | YYYY/MM/DD | いつまでに回答が必要か |
| 優先度 | Select | ✓ | 高/中/低 | 作業へのブロック度合い |
| 回答者 | Person |  |  | 回答を担当する人 |
| 回答日 | Date |  | YYYY/MM/DD | 実際に回答した日 |
| 回答内容 | Text |  |  | 質問への回答 |
| ステータス | Status | ✓ | Open/In Progress/Pending/Closed | 質問の状態 |
| 備考 | Text |  |  | その他メモ |
| 関連ドキュメント | URL |  |  | 関連する要件定義書などのリンク |
| プロジェクト | Relation |  |  | プロジェクト基本情報DBとのリレーション |

### ビュー推奨設定

1. **未回答ビュー**: ステータス = Open または In Progress でフィルタ、回答期限でソート
2. **優先度別ビュー**: 優先度でグループ化
3. **カテゴリ別ビュー**: カテゴリでグループ化
4. **完了済みビュー**: ステータス = Closed

---

## 2. 変更管理DB (Change Requests Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| 変更ID | Title | ✓ | CR-XXX | 一意な変更ID (例: CR-001) |
| 申請日 | Date | ✓ | YYYY/MM/DD | 変更が申請された日 |
| 申請者 | Person | ✓ |  | 変更を申請した担当者 |
| 変更内容 | Text | ✓ |  | 変更の具体的な内容 |
| 変更理由 | Text | ✓ |  | なぜこの変更が必要か |
| 優先度 | Select | ✓ | 高/中/低 | 変更の重要度 |
| 影響範囲 | Multi-select |  | 要件/設計/実装/テスト/スケジュール/コスト/品質 | 変更が影響する範囲 |
| 工数影響 | Number |  | 時間単位 | 追加で必要な工数(h) |
| コスト影響 | Number |  | 万円単位 | 追加で必要なコスト(万円) |
| スケジュール影響 | Number |  | 日単位 | 納期への影響(日) |
| ステータス | Status | ✓ | 申請中/承認待ち/承認済み/却下/保留/対応中/完了 | 変更の状態 |
| 承認者 | Person |  |  | 変更を承認する担当者 |
| 承認日 | Date |  | YYYY/MM/DD | 承認された日 |
| 対応予定日 | Date |  | YYYY/MM/DD | 対応を完了する予定日 |
| 完了日 | Date |  | YYYY/MM/DD | 実際に完了した日 |
| 備考 | Text |  |  | その他メモ |
| 関連ドキュメント | URL |  |  | 関連する設計書などのリンク |
| プロジェクト | Relation |  |  | プロジェクト基本情報DBとのリレーション |

### ビュー推奨設定

1. **承認待ちビュー**: ステータス = 申請中 または 承認待ち
2. **対応中ビュー**: ステータス = 対応中
3. **影響度別ビュー**: 工数影響またはコスト影響でソート
4. **完了済みビュー**: ステータス = 完了

### 計算式プロパティ (オプション)

- **承認レベル判定**: 工数影響とコスト影響から自動判定
  - 軽微: 工数8h未満かつコスト5万円未満
  - 中程度: 工数8〜40hかつコスト5〜20万円
  - 重大: 工数40h超またはコスト20万円超

---

## 3. リスク管理DB (Risks Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| リスクID | Title | ✓ | RSK-XXX | 一意なリスクID (例: RSK-001) |
| 識別日 | Date | ✓ | YYYY/MM/DD | リスクを識別した日 |
| リスク内容 | Text | ✓ |  | リスクの具体的な内容 |
| カテゴリ | Select | ✓ | 技術/スケジュール/要件/体制/外部要因/品質 | リスクの分類 |
| 発生確率 | Select | ✓ | 高(70%)/中(50%)/低(20%) | リスクが発生する確率 |
| 影響度 | Number | ✓ | 1〜10 | 発生時の影響の大きさ |
| リスク値 | Formula | ✓ | 自動計算 | 発生確率(%) × 影響度 ÷ 10 |
| 予防策 | Text |  |  | 発生確率を下げる対策 |
| 軽減策 | Text |  |  | 発生時の影響を小さくする対策 |
| 担当者 | Person | ✓ |  | リスク対応の責任者 |
| ステータス | Status | ✓ | 監視中/対応中/解決済み/顕在化/受容 | リスクの状態 |
| 最終更新日 | Last edited time | ✓ | 自動 | 最後に更新された日時 |
| 次回確認日 | Date |  | YYYY/MM/DD | 次にリスクを確認する日 |
| 備考 | Text |  |  | その他メモ |
| プロジェクト | Relation |  |  | プロジェクト基本情報DBとのリレーション |

### ビュー推奨設定

1. **最優先ビュー**: リスク値 ≥ 3.5 でフィルタ
2. **対応中ビュー**: ステータス = 対応中
3. **リスクマトリクスビュー**: ボードビュー、発生確率でグループ化
4. **カテゴリ別ビュー**: カテゴリでグループ化

### 計算式プロパティ

- **リスク値**: `prop("発生確率の数値") * prop("影響度") / 10`
  - 発生確率の数値: 高=70, 中=50, 低=20
- **優先度判定**: リスク値に基づいて自動判定
  - 最優先: リスク値 ≥ 3.5
  - 高: 2.0 ≤ リスク値 < 3.5
  - 中: 1.0 ≤ リスク値 < 2.0
  - 低: リスク値 < 1.0

---

## 4. プロジェクト基本情報DB (Projects Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| プロジェクト名 | Title | ✓ |  | プロジェクトの正式名称 |
| 顧客名 | Text | ✓ |  | 発注元の企業名 |
| 契約金額 | Number |  | 万円単位 | 契約総額 |
| 契約形態 | Select |  | 請負/準委任/ハイブリッド | 契約の種類 |
| 開始日 | Date | ✓ | YYYY/MM/DD | プロジェクト開始日 |
| 終了予定日 | Date | ✓ | YYYY/MM/DD | プロジェクト完了予定日 |
| フェーズ | Status | ✓ | 要求分析/要件定義/設計/開発/テスト/受入/完了 | 現在のフェーズ |
| PM | Person | ✓ |  | プロジェクトマネージャー |
| エンジニア | Person |  |  | 担当エンジニア |
| 営業 | Person |  |  | 担当営業 |
| プロジェクト計画書 | URL |  |  | プロジェクト計画書へのリンク |
| リポジトリURL | URL |  |  | GitHubリポジトリなど |
| Notion workspace | URL |  |  | プロジェクト用Notionページ |
| 備考 | Text |  |  | その他メモ |

---

## 5. 議事録DB (Meeting Notes Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| 会議名 | Title | ✓ |  | 会議のタイトル (例: 第3回定例会議) |
| 会議日 | Date | ✓ | YYYY/MM/DD | 会議実施日 |
| 参加者 | Multi-select |  |  | 参加者リスト |
| 会議種別 | Select |  | 定例/要件ヒアリング/設計レビュー/その他 | 会議の種類 |
| アジェンダ | Text |  |  | 会議の議題 |
| 議事メモ | Text | ✓ |  | 会議の内容 |
| 決定事項 | Text |  |  | 会議で決まったこと |
| TODO | Text |  |  | 会議から発生したアクション |
| 次回会議日 | Date |  | YYYY/MM/DD | 次回の会議予定 |
| プロジェクト | Relation | ✓ |  | プロジェクト基本情報DBとのリレーション |
| 関連質問 | Relation |  |  | 質問管理DBとのリレーション |

---

## 6. 進捗報告DB (Progress Reports Database)

### プロパティ一覧

| プロパティ名 | タイプ | 必須 | 選択肢/形式 | 説明 |
|------------|------|------|-----------|------|
| 報告週 | Title | ✓ | YYYY年WW週 | 報告対象の週 |
| 報告日 | Date | ✓ | YYYY/MM/DD | 報告書作成日 |
| 進捗率 | Number |  | % | 全体進捗率 |
| 今週の実績 | Text |  |  | 今週完了したタスク |
| 来週の予定 | Text |  |  | 来週予定のタスク |
| 課題・懸念事項 | Text |  |  | 現在の課題 |
| 遅延リスク | Select |  | なし/低/中/高 | 納期遅延のリスクレベル |
| プロジェクト | Relation | ✓ |  | プロジェクト基本情報DBとのリレーション |

---

## Notion構造とDBの対応関係

```
プロジェクトTOPページ
├── 基本情報 → プロジェクト基本情報DB (単一ページビュー)
├── 資料一覧 → 各フェーズのドキュメント (ファイル/URL)
├── 定例 → 議事録DB (リレーション表示)
├── 開発向け資料 → 設計・テスト資料 (ファイル/URL)
└── 開発フェーズ
    ├── 質問管理表 → 質問管理DB (リンクドビュー)
    ├── 変更管理表 → 変更管理DB (リンクドビュー)
    ├── リスク管理表 → リスク管理DB (リンクドビュー)
    └── 進捗レポート → 進捗報告DB (リンクドビュー)
```

---

## データベース間のリレーション

1. **質問管理DB** ← Relation → **プロジェクト基本情報DB**
2. **変更管理DB** ← Relation → **プロジェクト基本情報DB**
3. **リスク管理DB** ← Relation → **プロジェクト基本情報DB**
4. **議事録DB** ← Relation → **プロジェクト基本情報DB**
5. **議事録DB** ← Relation → **質問管理DB** (議事録から発生した質問)
6. **進捗報告DB** ← Relation → **プロジェクト基本情報DB**

---

## Notion MCP での操作パターン

### 1. 新規プロジェクト作成時
- プロジェクト基本情報DBに新規エントリ作成
- プロジェクト専用ページを作成 (テンプレート利用)
- 各管理DBのリンクドビューを配置

### 2. 質問登録時
- 質問管理DBに新規エントリ作成
- プロジェクトとのリレーション設定
- カテゴリ・優先度に基づく回答期限自動設定

### 3. 変更申請時
- 変更管理DBに新規エントリ作成
- 影響範囲の分析結果を記録
- リスク値に基づく承認レベル判定

### 4. リスク登録時
- リスク管理DBに新規エントリ作成
- 発生確率と影響度からリスク値自動計算
- 予防策・軽減策を提案

### 5. 週次レポート生成時
- 各管理DBから最新データを取得
- 進捗報告DBに新規エントリ作成
- サマリー情報を自動生成

---

## 注意事項

- Notion APIの制限により、一部の複雑な計算式は手動設定が必要
- Formulaプロパティは作成後に設定を調整
- Relationプロパティは双方向設定を推奨
- Statusプロパティの選択肢は事前に設定が必要

---

**作成日:** 2025/10/26
**最終更新日:** 2025/10/26
