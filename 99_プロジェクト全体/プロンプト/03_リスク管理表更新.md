# リスク管理表 更新プロンプト

## 目的

プロジェクトの成功を脅かす潜在的なリスクをNotionのリスク管理DBに登録し、発生確率と影響度を評価して、適切な対応策を講じる。定期的なモニタリングでリスクを早期に検知し、被害を最小化する。

---

## インプット

以下のいずれか、または組み合わせ:

1. **リスク情報**
   - リスク内容の説明
   - リスクが発生する可能性の根拠
   - 発生時の影響

2. **会議議事録、進捗報告**
   - 進捗遅延の兆候
   - 課題・懸念事項
   - 外部環境の変化

3. **過去プロジェクトの教訓**
   - 類似プロジェクトで発生したリスク
   - 業界の傾向

4. **既存のリスクID** (更新の場合)
   - リスク状況の変化
   - 対応策の実施結果

5. **プロジェクト計画書、WBS** (リスク分析に使用)
   - `01_要求分析/テンプレート/プロジェクト計画書.md`
   - `02_要件定義/テンプレート/08_WBS.md`

---

## 出力指示

### モード1: 新規リスク登録

Notionリスク管理DBに新規エントリを作成し、リスク値を自動計算する。

#### 必須項目の自動生成

1. **リスクID**: `RSK-{連番3桁}` (例: RSK-001, RSK-002)
   - 既存の最大番号+1で自動採番

2. **識別日**: 実行日 (YYYY/MM/DD)

3. **リスク内容**: ユーザー入力または議事録から抽出
   - 何が起こる可能性があるか、具体的に記載

4. **カテゴリ**: リスク内容から以下のいずれかに分類
   - **技術**: 技術的な実現性、新技術の習得、外部システム連携
     - キーワード例: 「API」「パフォーマンス」「互換性」「新技術」
   - **スケジュール**: 納期遅延、タスクの見積もり誤差
     - キーワード例: 「遅延」「期限」「工数不足」「タスク」
   - **要件**: 要件の不明確さ、変更、追加
     - キーワード例: 「仕様未確定」「要件変更」「スコープクリープ」
   - **体制**: 人員の離脱、スキル不足、コミュニケーション
     - キーワード例: 「離脱」「体調不良」「スキル」「コミュニケーション」
   - **外部要因**: 顧客環境、法規制、第三者ベンダー
     - キーワード例: 「法改正」「外部API」「顧客インフラ」「ベンダー」
   - **品質**: 不具合の多発、テスト不足
     - キーワード例: 「バグ」「品質」「テスト不足」「デグレ」

5. **発生確率**: 以下のルールで判定
   - **高 (70%)**: ほぼ確実に発生する、または既に兆候がある
     - キーワード例: 「確実に」「すでに」「明らかに」「兆候あり」
   - **中 (50%)**: 発生する可能性が半々、または過去の類似プロジェクトで発生実績あり
     - キーワード例: 「可能性がある」「過去に発生」「半々」
   - **低 (20%)**: 発生する可能性は低いが、ゼロではない
     - キーワード例: 「万が一」「念のため」「可能性は低い」

6. **影響度**: 以下の基準で1〜10点を判定
   - **9-10点 (致命的)**: 納期が2週間以上遅延、予算超過20%以上、プロジェクト失敗レベル
   - **7-8点 (大)**: 納期が1〜2週間遅延、予算超過10〜20%、受入テスト不合格リスク
   - **4-6点 (中)**: 納期が数日遅延、予算超過5〜10%、手戻りが発生するが対応可能
   - **1-3点 (小)**: ほぼ影響なし、予算超過5%未満、軽微な修正で対応可能

7. **リスク値**: 自動計算
   - 計算式: `発生確率(%) × 影響度(1-10) ÷ 10`
   - 例: 発生確率 中(50%) × 影響度 8 ÷ 10 = 4.0

8. **優先度**: リスク値に基づいて自動判定
   - **最優先**: リスク値 ≥ 3.5
   - **高**: 2.0 ≤ リスク値 < 3.5
   - **中**: 1.0 ≤ リスク値 < 2.0
   - **低**: リスク値 < 1.0

9. **予防策**: リスクの発生確率を下げるための対策を提案
   - 事前チェック、定期確認、バッファ確保など

10. **軽減策**: リスクが発生した場合の影響を小さくするための対策を提案
    - ロールバック手順、代替案、サポート要員確保など

11. **担当者**: リスク対応の責任者を推奨
    - 技術リスク → エンジニア
    - スケジュールリスク → PM
    - 要件リスク → PM + 顧客担当者
    - 体制リスク → PM
    - 外部要因リスク → PM + 営業
    - 品質リスク → エンジニア + PM

12. **ステータス**: 新規登録時は "監視中"

13. **次回確認日**: 優先度に応じて設定
    - 最優先: 識別日 + 1週間
    - 高: 識別日 + 2週間
    - 中: 識別日 + 1ヶ月
    - 低: 識別日 + 2ヶ月

---

### モード2: リスク状況更新

既存リスクの状況を更新する。

#### 更新項目

1. **ステータス**:
   - **監視中** → **対応中**: 予防策・軽減策を実施開始
   - **対応中** → **解決済み**: リスクが解消または影響が無視できるレベルに低減
   - **監視中** → **顕在化**: リスクが実際に発生
   - **監視中** → **受容**: リスクを認識した上で、対応せずに受け入れる判断

2. **発生確率**: 状況の変化に応じて更新
3. **影響度**: 状況の変化に応じて更新
4. **リスク値**: 自動再計算
5. **最終更新日**: 自動更新
6. **次回確認日**: 更新
7. **備考**: 変更理由、対応状況

---

### モード3: リスクの顕在化対応

リスクが実際に発生した場合の対応を記録する。

#### 対応手順

1. **ステータスを "顕在化" に変更**
2. **課題として登録** (質問管理DBまたは課題管理DBに登録)
3. **軽減策を実施**
4. **影響を記録**:
   - 実際の工数影響
   - 実際のコスト影響
   - 実際のスケジュール影響
5. **対応完了後、ステータスを "解決済み" に変更**

---

## 作成ガイドライン

### 1. 議事録・進捗報告からリスクを抽出

#### Step 1: リスクの識別

以下のパターンを探す:

- 「〜が不安」「〜が心配」
- 「〜ができない可能性がある」
- 「〜が遅れそう」
- 「課題」「懸念事項」とマークされた項目
- 「万が一〜したら」

#### Step 2: リスクの整形

```
【元の発言】
「顧客の仕様確定がまだ遅れてるんですよね。このままだと開発に入れないかも...」

【整形後】
リスク内容: 顧客の仕様確定が遅れ、開発着手が遅延する
カテゴリ: 要件
発生確率: 中 (50%) ← すでに遅れの兆候あり
影響度: 8点 (大) ← 開発期間が短縮され、納期遅延のリスク
```

### 2. Notion MCPでの操作手順

#### 新規リスク登録

```javascript
// Notion MCP の create_page ツールを使用
{
  "parent": { "database_id": "{リスク管理DB ID}" },
  "properties": {
    "リスクID": { "title": [{ "text": { "content": "RSK-001" } }] },
    "識別日": { "date": { "start": "2025-01-10" } },
    "リスク内容": { "rich_text": [{ "text": { "content": "顧客の仕様確定が遅れる" } }] },
    "カテゴリ": { "select": { "name": "要件" } },
    "発生確率": { "select": { "name": "中 (50%)" } },
    "影響度": { "number": 8 },
    "リスク値": { "number": 4.0 },
    "予防策": { "rich_text": [{ "text": { "content": "週次定例で未確定項目を事前共有、判断期限を明示" } }] },
    "軽減策": { "rich_text": [{ "text": { "content": "バッファ期間を2週間確保、並行作業可能な範囲から着手" } }] },
    "担当者": { "rich_text": [{ "text": { "content": "PM田中" } }] },
    "ステータス": { "status": { "name": "監視中" } },
    "次回確認日": { "date": { "start": "2025-01-24" } },
    "プロジェクト": { "relation": [{ "id": "{プロジェクトページID}" }] }
  }
}
```

#### リスク状況更新

```javascript
// Notion MCP の update_page ツールを使用
{
  "page_id": "{リスクページID}",
  "properties": {
    "発生確率": { "select": { "name": "低 (20%)" } },
    "リスク値": { "number": 1.6 },
    "ステータス": { "status": { "name": "解決済み" } },
    "備考": { "rich_text": [{ "text": { "content": "仕様確定完了、リスク解消" } }] }
  }
}
```

### 3. 予防策・軽減策の提案ロジック

各カテゴリに応じて、典型的な対策を提案:

#### 技術リスク
- **予防策**: 技術検証(POC)実施、API提供元の変更情報確認、抽象化レイヤー設計
- **軽減策**: バックアップ技術の選定、専門家のレビュー枠確保

#### スケジュールリスク
- **予防策**: 早期着手、週次進捗確認、バッファ確保
- **軽減策**: スコープ調整、並行作業、リソース追加

#### 要件リスク
- **予防策**: 早期確認、判断期限の明示、プロトタイプ提示
- **軽減策**: 段階リリース、最小構成での先行リリース

#### 体制リスク
- **予防策**: 定期的なコミュニケーション、過度な負荷回避、ペアプログラミング
- **軽減策**: バックアップ要員確保、ドキュメント整備

#### 外部要因リスク
- **予防策**: 定期的な情報収集、早期警戒システム構築
- **軽減策**: 代替手段の確保、顧客との合意形成

#### 品質リスク
- **予防策**: レビュー強化、テスト自動化、コードカバレッジ向上
- **軽減策**: バグ修正期間の確保、回帰テスト計画

---

## チェックリスト

### 新規リスク登録時

- [ ] リスクIDが一意になっているか
- [ ] リスク内容が具体的で明確か
- [ ] カテゴリが適切に分類されているか
- [ ] 発生確率が妥当か (根拠はあるか)
- [ ] 影響度が妥当か (スケジュール・コスト・品質への影響を考慮)
- [ ] リスク値が正しく計算されているか
- [ ] 予防策が発生確率を下げるものになっているか
- [ ] 軽減策が影響を小さくするものになっているか
- [ ] 担当者が割り当てられているか
- [ ] 次回確認日が設定されているか

### リスク状況更新時

- [ ] 発生確率・影響度の変化が記録されているか
- [ ] リスク値が再計算されているか
- [ ] ステータスが現状を正しく反映しているか
- [ ] 変更理由が備考に記載されているか

### リスク顕在化時

- [ ] ステータスが "顕在化" に変更されているか
- [ ] 課題として別途管理されているか
- [ ] 軽減策が実施されているか
- [ ] 実際の影響が記録されているか

---

## 使用例

### 例1: 進捗報告からリスクを抽出

**インプット (週次進捗報告)**

```
【今週の懸念事項】
- 外部APIの仕様変更が予告されており、影響範囲を調査中
- エンジニアの体調が優れず、作業ペースが落ちている
- テスト期間が想定より短くなりそう
```

**出力 (Notion登録内容)**

```
RSK-002: 外部APIの仕様変更
- カテゴリ: 技術
- 発生確率: 低 (20%) ← 予告はあるが確定ではない
- 影響度: 9点 (致命的) ← 仕様変更の影響範囲が大きい
- リスク値: 1.8
- 優先度: 中
- 予防策: API提供元の変更情報を週次で確認、仕様固定版を使用
- 軽減策: 抽象化レイヤーを設け、仕様変更の影響範囲を局所化
- 担当者: エンジニア鈴木

RSK-003: エンジニアの体調不良・離脱
- カテゴリ: 体制
- 発生確率: 低 (10%) ← 一時的な体調不良の可能性
- 影響度: 10点 (致命的) ← エンジニアが1名のため影響大
- リスク値: 1.0
- 優先度: 中
- 予防策: 定期的なコミュニケーション、過度な負荷を避ける
- 軽減策: ペアプログラミング実施、ドキュメント整備、サポート要員確保
- 担当者: PM田中

RSK-004: テスト期間が不足
- カテゴリ: スケジュール
- 発生確率: 中 (40%) ← 開発の遅れが顕在化しつつある
- 影響度: 6点 (中) ← テスト不足による品質低下のリスク
- リスク値: 2.4
- 優先度: 高
- 予防策: 開発の早期着手、週次で進捗確認
- 軽減策: テスト自動化を推進、クリティカルパスを優先テスト
- 担当者: エンジニア鈴木
```

### 例2: リスクの状況更新

**インプット**

```
リスクID: RSK-001
状況: 顧客との週次定例で仕様確定のスケジュールが明確になり、
      2025/01/31までに確定する見込みとなった。
```

**出力 (Notion更新内容)**

```
RSK-001の更新:
- 発生確率: 中 (50%) → 低 (20%)
- リスク値: 4.0 → 1.6
- ステータス: 監視中 (変更なし)
- 備考: 仕様確定期限が2025/01/31に決定。リスク低減。
- 次回確認日: 2025/02/01
```

---

## サマリー表示機能

リスク管理表の現状をサマリー表示する。

### 表示項目

1. **ステータス別件数**

```
【リスク管理サマリー】
- 監視中: 4件
- 対応中: 1件
- 解決済み: 1件
- 顕在化: 0件
合計: 6件
```

2. **優先度別件数**

```
【優先度別】
- 最優先 (リスク値3.5以上): 2件
- 高 (リスク値2.0〜3.4): 2件
- 中 (リスク値1.0〜1.9): 1件
- 低 (リスク値1.0未満): 0件
```

3. **リスクマトリクス (視覚化)**

```
【リスクマトリクス】
影響度
  10 |                | RSK-003        |                |
   9 |                | RSK-002        |                |
   8 | RSK-006        | RSK-001        |                |
   7 |                | RSK-005 (解決) |                |
   6 |                | RSK-004        |                |
     |________________|________________|________________|
        0%            30%             70%            100%
                      発生確率
```

4. **次回確認アラート**

```
【📅 次回確認予定】
- RSK-001: 顧客の仕様確定が遅れる (次回確認: 2025/01/24)
- RSK-004: テスト期間が不足 (次回確認: 2025/01/28)
```

---

## 関連ドキュメント

- [Notion DB構造設計](../Notion_DB構造設計.md)
- [リスク管理表テンプレート](../リスク管理表_テンプレート.md)
- [プロジェクト計画書](../../01_要求分析/テンプレート/プロジェクト計画書.md)
- [遅延リスク判定プロンプト](../../05_進捗報告/プロンプト/遅延リスク判定.md)

---

**作成日:** 2025/10/26
**最終更新日:** 2025/10/26
