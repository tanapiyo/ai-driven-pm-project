# 要件定義書：{システム/プロジェクト名}

**作成日：** YYYY/MM/DD
**作成者：** ____________________
**バージョン：** v1.0
**承認者：** ____________________
**承認日：** YYYY/MM/DD

---

## 改訂履歴

| 版数 | 改訂日 | 改訂者 | 改訂内容 | 承認者 |
|------|--------|--------|----------|--------|
| v1.0 | YYYY/MM/DD | | 初版作成 | |
| | | | | |

---

## 目次

1. [はじめに](#1-はじめに)
2. [プロジェクト概要](#2-プロジェクト概要)
3. [業務要件](#3-業務要件)
4. [機能要件](#4-機能要件)
5. [非機能要件](#5-非機能要件)
6. [画面要件](#6-画面要件)
7. [帳票要件](#7-帳票要件)
8. [データ要件](#8-データ要件)
9. [外部インターフェース要件](#9-外部インターフェース要件)
10. [移行要件](#10-移行要件)
11. [テスト要件](#11-テスト要件)
12. [運用・保守要件](#12-運用保守要件)
13. [制約事項](#13-制約事項)
14. [前提条件](#14-前提条件)
15. [用語集](#15-用語集)

---

## 1. はじめに

### 1.1 文書の目的

本文書は、{システム/プロジェクト名}の要件定義書であり、システム開発に必要な機能要件・非機能要件を定義する。

### 1.2 文書の範囲

本文書では、以下の内容を定義する：
- 業務要件
- 機能要件
- 非機能要件
- 画面・帳票要件
- データ要件
- 外部インターフェース要件

### 1.3 対象読者

- プロジェクトオーナー
- プロジェクトマネージャー
- システム設計・開発担当者
- テスト担当者
- 運用・保守担当者

### 1.4 参照ドキュメント

| ドキュメント名 | 版数 | 作成日 | 備考 |
|---------------|------|--------|------|
| プロジェクト計画書 | v1.0 | YYYY/MM/DD | |
| As-Is業務フロー | v1.0 | YYYY/MM/DD | |
| To-Be業務フロー | v1.0 | YYYY/MM/DD | |

---

## 2. プロジェクト概要

### 2.1 プロジェクトの目的

<!-- プロジェクト計画書から転記 -->

### 2.2 プロジェクトの背景

<!-- プロジェクト計画書から転記 -->

### 2.3 対象範囲

#### 対象業務
-
-

#### 対象部門
-
-

#### 対象ユーザー数
- 想定ユーザー数：約　　名
- 同時接続数：約　　名

#### 対象外
-
-

### 2.4 期待される効果

#### 定量的効果
| 項目 | 現状 | 目標 | 削減効果 |
|------|------|------|----------|
| 処理時間 | | | |
| エラー率 | | | |
| コスト | | | |

#### 定性的効果
-
-

---

## 3. 業務要件

### 3.1 To-Be業務フロー

<!-- To-Be業務フローの概要を記載、または図を添付 -->

### 3.2 業務要件一覧

| No. | 業務要件ID | 業務要件名 | 詳細 | 優先度 | 関連機能 |
|-----|-----------|-----------|------|--------|---------|
| 1 | BR-001 | | | 必須/重要/任意 | |
| 2 | BR-002 | | | | |

### 3.3 業務ルール

| No. | ルールID | ルール名 | 内容 | 適用範囲 |
|-----|---------|---------|------|---------|
| 1 | BL-001 | | | |
| 2 | BL-002 | | | |

---

## 4. 機能要件

### 4.1 機能一覧

| No. | 機能ID | 大分類 | 中分類 | 機能名 | 概要 | 優先度 | 備考 |
|-----|--------|--------|--------|--------|------|--------|------|
| 1 | F-001 | ユーザー管理 | ログイン | ログイン機能 | | 必須 | |
| 2 | F-002 | ユーザー管理 | ログアウト | ログアウト機能 | | 必須 | |
| 3 | F-003 | データ入力 | 新規登録 | データ新規登録機能 | | 必須 | |

### 4.2 機能詳細

#### 機能ID: F-001 - ログイン機能

**概要：**
ユーザーがシステムにログインする機能

**詳細：**
1. ユーザーIDとパスワードを入力
2. 認証処理を実行
3. 認証成功時：トップ画面に遷移
4. 認証失敗時：エラーメッセージを表示

**入力：**
- ユーザーID（必須、半角英数字、8〜20文字）
- パスワード（必須、半角英数字記号、8〜20文字）

**出力：**
- 認証成功：トップ画面
- 認証失敗：エラーメッセージ「ユーザーIDまたはパスワードが正しくありません」

**ビジネスルール：**
- 連続3回失敗でアカウントロック（30分間）
- パスワードは90日で有効期限切れ

**非機能要件との関連：**
- セキュリティ要件：NFR-SEC-001（認証）

**優先度：** 必須

**備考：**
-

---

#### 機能ID: F-002 - {機能名}

（以下、同様に各機能を記載）

---

### 4.3 ユースケース

#### ユースケースID: UC-001 - データ新規登録

**アクター：**
- 一般ユーザー

**事前条件：**
- ログイン済み
- データ入力権限あり

**基本フロー：**
1. ユーザーが「新規登録」ボタンをクリック
2. システムがデータ入力画面を表示
3. ユーザーが必要項目を入力
4. ユーザーが「確認」ボタンをクリック
5. システムが入力内容を検証
6. システムが確認画面を表示
7. ユーザーが「登録」ボタンをクリック
8. システムがデータを登録
9. システムが完了画面を表示

**代替フロー：**
- 5a. 入力検証エラー
  - 5a-1. システムがエラーメッセージを表示
  - 5a-2. ユーザーが入力を修正
  - 5a-3. フロー5に戻る

- 7a. ユーザーが「戻る」ボタンをクリック
  - 7a-1. フロー3に戻る

**例外フロー：**
- システムエラー発生時
  - システムがエラーメッセージを表示
  - ログにエラー内容を記録
  - 管理者に通知

**事後条件：**
- データが正常に登録される
- 登録完了メールが送信される

---

## 5. 非機能要件

### 5.1 性能要件

| No. | 要件ID | 要件名 | 詳細 | 目標値 | 測定方法 |
|-----|--------|--------|------|--------|----------|
| 1 | NFR-PER-001 | 応答時間 | 画面表示の応答時間 | 3秒以内 | 負荷テスト |
| 2 | NFR-PER-002 | 処理時間 | バッチ処理の完了時間 | 2時間以内 | 性能テスト |
| 3 | NFR-PER-003 | 同時接続数 | 同時アクセス可能数 | 100ユーザー | 負荷テスト |
| 4 | NFR-PER-004 | スループット | トランザクション処理数 | 1000件/時間 | 性能テスト |

### 5.2 可用性要件

| No. | 要件ID | 要件名 | 詳細 | 目標値 |
|-----|--------|--------|------|--------|
| 1 | NFR-AVL-001 | 稼働率 | システム稼働率 | 99.9%以上 |
| 2 | NFR-AVL-002 | 稼働時間 | サービス提供時間 | 平日8:00〜20:00 |
| 3 | NFR-AVL-003 | 復旧時間 | 障害時の復旧目標時間（RTO） | 4時間以内 |
| 4 | NFR-AVL-004 | データ復旧 | データ復旧目標時点（RPO） | 1日以内 |

### 5.3 セキュリティ要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | NFR-SEC-001 | 認証 | ユーザーID・パスワードによる認証 |
| 2 | NFR-SEC-002 | 認可 | ロールベースのアクセス制御 |
| 3 | NFR-SEC-003 | 暗号化 | 通信はHTTPS、パスワードはハッシュ化 |
| 4 | NFR-SEC-004 | 監査ログ | 全ての重要操作をログに記録 |
| 5 | NFR-SEC-005 | セッション管理 | 30分間無操作でタイムアウト |

### 5.4 ユーザビリティ要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | NFR-USE-001 | 操作性 | 直感的なUI、3クリック以内で主要機能にアクセス |
| 2 | NFR-USE-002 | 学習容易性 | マニュアルなしで基本操作が可能 |
| 3 | NFR-USE-003 | アクセシビリティ | WCAG 2.1 レベルAA準拠 |
| 4 | NFR-USE-004 | 多言語対応 | 日本語・英語対応 |

### 5.5 保守性要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | NFR-MNT-001 | ログ出力 | エラーログ、操作ログを出力 |
| 2 | NFR-MNT-002 | モニタリング | システム稼働状況の監視機能 |
| 3 | NFR-MNT-003 | バックアップ | 日次自動バックアップ |
| 4 | NFR-MNT-004 | 保守性 | コードの可読性、ドキュメント整備 |

### 5.6 移植性要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | NFR-PRT-001 | 環境依存性 | 特定ベンダーに依存しない設計 |
| 2 | NFR-PRT-002 | クラウド対応 | AWS/Azure/GCPで動作可能 |

### 5.7 拡張性要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | NFR-SCL-001 | ユーザー数拡張 | 将来的に1000ユーザーまで拡張可能 |
| 2 | NFR-SCL-002 | データ量拡張 | 年間データ増加率20%に対応 |

---

## 6. 画面要件

### 6.1 画面一覧

| No. | 画面ID | 画面名 | 概要 | 対象ユーザー | 優先度 |
|-----|--------|--------|------|-------------|--------|
| 1 | SCR-001 | ログイン画面 | ユーザー認証 | 全ユーザー | 必須 |
| 2 | SCR-002 | トップ画面 | メニュー表示 | 全ユーザー | 必須 |
| 3 | SCR-003 | データ入力画面 | データ新規登録 | 一般ユーザー | 必須 |

### 6.2 画面詳細

#### 画面ID: SCR-001 - ログイン画面

**画面概要：**
ユーザーがシステムにログインするための画面

**表示項目：**
| 項目名 | 項目ID | 型 | 桁数 | 必須 | 初期値 | 入力チェック |
|--------|--------|-----|------|------|--------|--------------|
| ユーザーID | userId | 文字列 | 20 | ○ | | 半角英数字 |
| パスワード | password | 文字列 | 20 | ○ | | 半角英数字記号 |

**ボタン：**
- ログインボタン：認証処理を実行
- パスワード忘れリンク：パスワードリセット画面に遷移

**画面遷移：**
- ログイン成功 → トップ画面（SCR-002）
- ログイン失敗 → 同画面（エラーメッセージ表示）
- パスワード忘れ → パスワードリセット画面（SCR-099）

**画面イメージ：**
<!-- Figmaのリンクまたは画像を添付 -->

**備考：**
-

---

## 7. 帳票要件

### 7.1 帳票一覧

| No. | 帳票ID | 帳票名 | 種類 | 出力形式 | 出力タイミング | 優先度 |
|-----|--------|--------|------|----------|----------------|--------|
| 1 | RPT-001 | 月次集計表 | 集計帳票 | PDF/Excel | 月次バッチ | 必須 |
| 2 | RPT-002 | データ一覧 | 一覧帳票 | Excel | オンデマンド | 必須 |

### 7.2 帳票詳細

#### 帳票ID: RPT-001 - 月次集計表

**帳票概要：**
月次のデータ集計結果を出力する帳票

**出力項目：**
| 項目名 | データ型 | 桁数 | 集計方法 | 備考 |
|--------|---------|------|----------|------|
| 部門コード | 文字列 | 10 | | |
| 部門名 | 文字列 | 50 | | |
| 件数 | 数値 | 10 | SUM | |
| 金額 | 数値 | 15 | SUM | カンマ区切り |

**出力条件：**
- 対象月：前月
- 対象データ：全部門

**ソート順：**
- 部門コード昇順

**帳票サンプル：**
<!-- 帳票イメージを添付 -->

---

## 8. データ要件

### 8.1 データモデル概要

<!-- ER図を添付 -->

### 8.2 テーブル一覧

| No. | テーブルID | テーブル名（論理） | テーブル名（物理） | 概要 | 件数見積 |
|-----|-----------|-------------------|-------------------|------|----------|
| 1 | TBL-001 | ユーザーマスタ | m_user | ユーザー情報 | 500件 |
| 2 | TBL-002 | データテーブル | t_data | 業務データ | 10万件/年 |

### 8.3 テーブル定義

#### テーブルID: TBL-001 - ユーザーマスタ（m_user）

| No. | 項目名（論理） | 項目名（物理） | データ型 | 桁数 | NULL | PK | FK | デフォルト値 | 備考 |
|-----|---------------|---------------|---------|------|------|----|----|--------------|------|
| 1 | ユーザーID | user_id | VARCHAR | 20 | × | ○ | | | |
| 2 | ユーザー名 | user_name | VARCHAR | 100 | × | | | | |
| 3 | メールアドレス | email | VARCHAR | 255 | × | | | | ユニーク |
| 4 | パスワード | password | VARCHAR | 255 | × | | | | ハッシュ化 |
| 5 | 作成日時 | created_at | TIMESTAMP | | × | | | CURRENT_TIMESTAMP | |
| 6 | 更新日時 | updated_at | TIMESTAMP | | × | | | CURRENT_TIMESTAMP | |

**インデックス：**
- PRIMARY KEY: user_id
- UNIQUE: email

**データ保持期間：**
- 無期限（退会時に論理削除）

---

## 9. 外部インターフェース要件

### 9.1 外部システム連携一覧

| No. | I/F ID | 連携先システム | 連携方式 | 連携内容 | 連携タイミング | 優先度 |
|-----|--------|---------------|---------|---------|----------------|--------|
| 1 | IF-001 | ERPシステム | API（REST） | データ取得 | リアルタイム | 必須 |
| 2 | IF-002 | メール配信システム | SMTP | メール送信 | イベント発生時 | 必須 |

### 9.2 インターフェース詳細

#### I/F ID: IF-001 - ERPシステム連携

**連携概要：**
ERPシステムからデータを取得する

**連携方式：**
- プロトコル：HTTPS
- 形式：REST API（JSON）
- 認証：OAuth 2.0

**リクエスト：**
```json
{
  "date_from": "2024-01-01",
  "date_to": "2024-01-31",
  "department_code": "D001"
}
```

**レスポンス：**
```json
{
  "status": "success",
  "data": [
    {
      "id": "123",
      "name": "商品A",
      "amount": 10000
    }
  ]
}
```

**エラーハンドリング：**
- タイムアウト：30秒
- リトライ：3回（指数バックオフ）

---

## 10. 移行要件

### 10.1 移行対象データ

| No. | データ名 | 移行元 | 移行先 | 件数見積 | 移行方法 |
|-----|---------|-------|-------|---------|---------|
| 1 | ユーザーマスタ | 既存Excelファイル | m_user | 500件 | CSVインポート |
| 2 | 過去データ | 旧システムDB | t_data | 5万件 | バッチ処理 |

### 10.2 移行計画

**移行方式：**
- ☐ 一括移行
- ☐ 段階移行
- ☐ 並行稼働

**移行スケジュール：**
1. データ抽出：YYYY/MM/DD
2. データ変換：YYYY/MM/DD
3. データ検証：YYYY/MM/DD
4. 本番投入：YYYY/MM/DD

### 10.3 切り戻し計画

**切り戻し判断基準：**
-

**切り戻し手順：**
1.
2.

---

## 11. テスト要件

### 11.1 テスト種別

| テスト種別 | 実施者 | 目的 | 合格基準 |
|-----------|-------|------|---------|
| 単体テスト | 開発者 | 個別機能の動作確認 | カバレッジ80%以上 |
| 結合テスト | 開発者 | システム間連携確認 | 全テストケース合格 |
| システムテスト | テスト担当者 | システム全体の動作確認 | 全テストケース合格 |
| 受入テスト | 発注者 | 要件充足確認 | 全シナリオ合格 |

### 11.2 テスト観点

- 機能テスト：全機能が要件通り動作するか
- 性能テスト：応答時間、スループットが目標値を満たすか
- セキュリティテスト：脆弱性がないか
- ユーザビリティテスト：使いやすさ
- 回帰テスト：既存機能に影響がないか

---

## 12. 運用・保守要件

### 12.1 運用要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | OPR-001 | バックアップ | 日次自動バックアップ、保管期間30日 |
| 2 | OPR-002 | 監視 | 稼働監視、障害時アラート |
| 3 | OPR-003 | バッチ処理 | 日次バッチ、月次バッチ |

### 12.2 保守要件

| No. | 要件ID | 要件名 | 詳細 |
|-----|--------|--------|------|
| 1 | MNT-001 | 問い合わせ対応 | 平日9:00〜18:00、メール・電話 |
| 2 | MNT-002 | 障害対応 | 重大障害は2時間以内に一次対応 |
| 3 | MNT-003 | 定期メンテナンス | 月1回、夜間実施 |

---

## 13. 制約事項

### 13.1 技術的制約
-
-

### 13.2 スケジュール制約
-
-

### 13.3 予算制約
-
-

### 13.4 組織的制約
-
-

---

## 14. 前提条件

### 14.1 環境前提
-
-

### 14.2 リソース前提
-
-

### 14.3 外部依存
-
-

---

## 15. 用語集

| 用語 | 読み | 定義 |
|------|------|------|
| | | |
| | | |

---

## 付録

### A. 要件トレーサビリティマトリクス

| 業務要件ID | 機能要件ID | 画面ID | テストケースID |
|-----------|-----------|--------|---------------|
| BR-001 | F-001, F-002 | SCR-001 | TC-001, TC-002 |
| BR-002 | F-003 | SCR-003 | TC-003 |

### B. 未決事項一覧

| No. | 未決事項 | 期限 | 担当 | ステータス |
|-----|---------|------|------|-----------|
| 1 | | | | Open/In Progress/Closed |
| 2 | | | | |

### C. 合意事項一覧

| No. | 合意事項 | 合意日 | 合意者 |
|-----|---------|--------|--------|
| 1 | | | |
| 2 | | | |
