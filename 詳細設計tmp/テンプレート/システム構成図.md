# システム構成図

## 1. 文書管理情報
- **作成日**: YYYY/MM/DD
- **最終更新日**: YYYY/MM/DD
- **作成者**: [作成者名]
- **バージョン**: 1.0
- **承認者**: [承認者名]

## 2. 概要
### 2.1 目的
[このシステム構成図の目的を記載]

### 2.2 対象システム
[対象となるシステム名を記載]

### 2.3 参照ドキュメント
- 要件定義書
- [その他関連ドキュメント]

## 3. システム全体構成図
### 3.1 論理構成図
```
[Mermaid形式またはテキストベースの図を記載]
例:
┌─────────────┐
│  クライアント  │
└──────┬──────┘
       │
┌──────▼──────┐
│   Web層     │
└──────┬──────┘
       │
┌──────▼──────┐
│  AP層       │
└──────┬──────┘
       │
┌──────▼──────┐
│  DB層       │
└─────────────┘
```

### 3.2 物理構成図
```
[サーバー、ネットワーク機器などの物理配置を記載]
```

## 4. レイヤー別構成
### 4.1 プレゼンテーション層
| コンポーネント名 | 種類 | 役割 | 使用技術 | 備考 |
|-----------------|------|------|----------|------|
| [例: フロントエンドアプリ] | SPA | ユーザーインターフェース | React | |

### 4.2 アプリケーション層
| コンポーネント名 | 種類 | 役割 | 使用技術 | 備考 |
|-----------------|------|------|----------|------|
| [例: APIサーバー] | REST API | ビジネスロジック | Node.js | |

### 4.3 データ層
| コンポーネント名 | 種類 | 役割 | 使用技術 | 備考 |
|-----------------|------|------|----------|------|
| [例: RDBサーバー] | DB | データ永続化 | PostgreSQL | |

### 4.4 外部連携層
| 連携先システム名 | 連携方式 | プロトコル | 認証方式 | 備考 |
|----------------|---------|-----------|---------|------|
| [例: 決済システム] | API | HTTPS | OAuth2.0 | |

## 5. ネットワーク構成
### 5.1 ネットワークセグメント
| セグメント名 | 用途 | IPアドレス範囲 | ファイアウォール設定 |
|-------------|------|---------------|---------------------|
| [例: DMZ] | 公開サーバー配置 | 192.168.1.0/24 | インターネット→DMZ許可 |

### 5.2 通信フロー
| 送信元 | 宛先 | プロトコル | ポート | 用途 | 備考 |
|-------|------|----------|-------|------|------|
| クライアント | Webサーバー | HTTPS | 443 | 画面表示 | |

## 6. インフラ構成
### 6.1 サーバー構成
| サーバー名 | 役割 | OS | スペック | 台数 | 配置場所 |
|-----------|------|----|---------|----|---------|
| [例: web-01] | Webサーバー | Ubuntu 22.04 | 4core/8GB | 2 | AWS EC2 |

### 6.2 ストレージ構成
| ストレージ名 | 種類 | 容量 | 用途 | バックアップ |
|-------------|------|------|------|-------------|
| [例: data-store] | EBS | 500GB | DBデータ | 日次 |

### 6.3 ミドルウェア構成
| ミドルウェア名 | バージョン | 用途 | インストール先 |
|--------------|-----------|------|---------------|
| [例: Nginx] | 1.24 | Webサーバー | web-01, web-02 |

## 7. 可用性・拡張性
### 7.1 冗長化構成
| 対象 | 冗長化方式 | 目的 | 備考 |
|------|----------|------|------|
| [例: Webサーバー] | アクティブ-アクティブ | 可用性向上 | ロードバランサー使用 |

### 7.2 負荷分散
| 対象 | 負荷分散方式 | 使用技術 | 備考 |
|------|------------|---------|------|
| [例: Web層] | ラウンドロビン | AWS ALB | |

### 7.3 スケーリング方針
| 対象 | スケーリング方式 | トリガー条件 | 備考 |
|------|---------------|------------|------|
| [例: AP層] | 水平スケール | CPU使用率70%超 | Auto Scaling |

## 8. セキュリティ構成
### 8.1 セキュリティ対策
| 対象 | 対策内容 | 使用技術 | 備考 |
|------|---------|---------|------|
| [例: 通信暗号化] | SSL/TLS通信 | Let's Encrypt | |

### 8.2 認証・認可
| 項目 | 方式 | 使用技術 | 備考 |
|------|------|---------|------|
| [例: ユーザー認証] | ID/パスワード + MFA | AWS Cognito | |

## 9. 監視・ログ
### 9.1 監視項目
| 監視対象 | 監視項目 | しきい値 | アラート通知先 |
|---------|---------|---------|--------------|
| [例: Webサーバー] | CPU使用率 | 80% | メール通知 |

### 9.2 ログ管理
| ログ種別 | 出力先 | 保管期間 | 用途 |
|---------|-------|---------|------|
| [例: アクセスログ] | CloudWatch Logs | 90日 | アクセス解析 |

## 10. バックアップ・リカバリ
### 10.1 バックアップ方針
| 対象 | バックアップ方式 | 頻度 | 保管期間 | 保管場所 |
|------|---------------|------|---------|---------|
| [例: DB] | フルバックアップ | 日次 | 30日 | S3 |

### 10.2 リカバリ方針
| シナリオ | RTO | RPO | リカバリ手順 |
|---------|-----|-----|------------|
| [例: DBサーバー障害] | 4時間 | 24時間 | バックアップから復元 |

## 11. 開発・運用環境
### 11.1 環境構成
| 環境名 | 用途 | アクセス制限 | データ同期 |
|-------|------|------------|-----------|
| 開発環境 | 開発・単体テスト | 開発者のみ | なし |
| ステージング環境 | 結合テスト | 開発者+テスター | 週次 |
| 本番環境 | サービス提供 | 全ユーザー | - |

### 11.2 デプロイフロー
```
[コード管理→ビルド→テスト→デプロイの流れを記載]
```

## 12. 制約事項・前提条件
### 12.1 技術的制約
- [制約事項1]
- [制約事項2]

### 12.2 前提条件
- [前提条件1]
- [前提条件2]

## 13. 用語集
| 用語 | 説明 |
|------|------|
| [用語1] | [説明] |

## 14. 補足事項
[その他特記事項があれば記載]

## 15. 変更履歴
| 版数 | 変更日 | 変更者 | 変更内容 |
|------|-------|--------|---------|
| 1.0 | YYYY/MM/DD | [氏名] | 初版作成 |
