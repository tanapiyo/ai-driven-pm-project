# 画面設計書

## 1. 文書管理情報
- **作成日**: YYYY/MM/DD
- **最終更新日**: YYYY/MM/DD
- **作成者**: [作成者名]
- **バージョン**: 1.0
- **承認者**: [承認者名]

## 2. 概要
### 2.1 目的
[この画面設計書の目的を記載]

### 2.2 対象システム
[対象となるシステム名を記載]

### 2.3 参照ドキュメント
- 要件定義書
- DB設計書
- API設計書
- [その他関連ドキュメント]

## 3. 画面設計方針
### 3.1 UI/UXコンセプト
| 項目 | 内容 |
|------|------|
| デザインコンセプト | [例: シンプル、直感的、モダン] |
| ターゲットユーザー | [例: 一般ユーザー、管理者] |
| デバイス対応 | [例: PC、タブレット、スマートフォン] |
| アクセシビリティ | [例: WCAG 2.1 Level AA準拠] |

### 3.2 デザインシステム
| 項目 | 内容 |
|------|------|
| UIフレームワーク | [例: Material-UI / Ant Design / Bootstrap] |
| カラーパレット | プライマリ: #007bff、セカンダリ: #6c757d、等 |
| タイポグラフィ | フォント: Noto Sans JP、サイズ: 14px-24px |
| アイコンセット | [例: Material Icons / Font Awesome] |

### 3.3 レスポンシブデザイン
| ブレイクポイント | デバイス | 画面幅 | レイアウト |
|---------------|---------|-------|---------|
| XS | スマートフォン | < 576px | 1カラム |
| SM | タブレット（縦） | 576px - 768px | 1-2カラム |
| MD | タブレット（横） | 768px - 992px | 2カラム |
| LG | PC | 992px - 1200px | 2-3カラム |
| XL | 大画面PC | ≥ 1200px | 3カラム |

### 3.4 共通UI要素
#### 3.4.1 ボタン
| 種類 | 用途 | スタイル | 例 |
|------|------|---------|-----|
| プライマリボタン | 主要アクション | 青背景、白文字 | 登録、保存 |
| セカンダリボタン | 補助アクション | グレー背景、黒文字 | キャンセル、戻る |
| 危険ボタン | 削除等 | 赤背景、白文字 | 削除、退会 |
| リンクボタン | 遷移のみ | 下線付きテキスト | 詳細を見る |

#### 3.4.2 フォーム要素
| 要素 | 仕様 | バリデーション表示 |
|------|------|------------------|
| テキスト入力 | 枠線、フォーカス時強調 | エラー時赤枠 + エラーメッセージ |
| セレクトボックス | ドロップダウン | 必須項目は「*」表示 |
| チェックボックス | 複数選択 | - |
| ラジオボタン | 単一選択 | - |
| 日付ピッカー | カレンダー表示 | - |

#### 3.4.3 メッセージ表示
| 種類 | 用途 | スタイル |
|------|------|---------|
| 成功メッセージ | 処理成功 | 緑背景、白文字、3秒後自動消去 |
| エラーメッセージ | 処理失敗 | 赤背景、白文字、手動で閉じる |
| 警告メッセージ | 注意喚起 | 黄背景、黒文字 |
| 情報メッセージ | 情報提供 | 青背景、白文字 |

### 3.5 画面遷移設計
#### 3.5.1 遷移方式
| 方式 | 用途 | 例 |
|------|------|-----|
| ページ遷移 | 画面全体が切り替わる | 一覧→詳細 |
| モーダル表示 | 一時的な入力・確認 | 削除確認ダイアログ |
| タブ切替 | 同一画面内で情報切替 | プロフィール編集タブ |

#### 3.5.2 遷移図
```
[ログイン画面] → [ダッシュボード] → [ユーザー一覧]
                                  → [注文一覧]
                                  → [設定]
```

### 3.6 エラーハンドリング
| エラー種別 | 表示方法 | 例 |
|-----------|---------|-----|
| バリデーションエラー | フィールド下に赤文字 | 「メールアドレスの形式が正しくありません」 |
| API通信エラー | トースト通知 | 「通信エラーが発生しました」 |
| 権限エラー | 画面全体にメッセージ | 「この画面にアクセスする権限がありません」 |

## 4. 画面一覧
### 4.1 画面一覧表
| 画面ID | 画面名 | 種別 | 権限 | 関連機能 | 備考 |
|-------|-------|------|------|---------|------|
| S001 | ログイン画面 | 認証 | 全員 | ユーザー認証 | |
| S002 | ダッシュボード | 表示 | ログイン済み | 統計表示 | |
| S003 | ユーザー一覧画面 | 一覧 | admin | ユーザー管理 | |
| S004 | ユーザー詳細画面 | 詳細 | admin, self | ユーザー管理 | |
| S005 | ユーザー登録画面 | 登録 | admin | ユーザー管理 | |
| S006 | ユーザー編集画面 | 編集 | admin, self | ユーザー管理 | |

## 5. 画面詳細設計

### 5.1 [画面ID: S001 ログイン画面]

#### 5.1.1 基本情報
| 項目 | 内容 |
|------|------|
| 画面ID | S001 |
| 画面名 | ログイン画面 |
| URL | /login |
| アクセス権限 | 全員（未ログインユーザー） |
| 関連API | POST /api/v1/auth/login |
| 用途 | ユーザー認証 |

#### 5.1.2 ワイヤーフレーム
```
┌────────────────────────────────────┐
│                                    │
│          [ロゴ]                     │
│                                    │
│        ログイン                      │
│                                    │
│  メールアドレス                       │
│  [___________________]             │
│                                    │
│  パスワード                          │
│  [___________________] [👁]        │
│                                    │
│  [ ] ログイン状態を保持する            │
│                                    │
│  [     ログイン      ]  ← ボタン     │
│                                    │
│  パスワードを忘れた方はこちら           │
│                                    │
│  アカウントをお持ちでない方は 新規登録   │
│                                    │
└────────────────────────────────────┘
```

#### 5.1.3 画面項目定義
| No | 項目名 | 項目ID | 種類 | 初期値 | 必須 | 最大長 | バリデーション | 備考 |
|----|-------|-------|------|-------|------|-------|--------------|------|
| 1 | メールアドレス | email | テキスト | - | ○ | 255 | メールアドレス形式 | |
| 2 | パスワード | password | パスワード | - | ○ | 100 | 最小8文字 | 表示/非表示切替可能 |
| 3 | ログイン状態を保持 | rememberMe | チェックボックス | false | × | - | - | チェックすると30日間ログイン保持 |

#### 5.1.4 ボタン定義
| ボタン名 | アクション | API | 成功時の動作 | 失敗時の動作 |
|---------|----------|-----|------------|------------|
| ログイン | 認証実行 | POST /api/v1/auth/login | ダッシュボードへ遷移 | エラーメッセージ表示 |

#### 5.1.5 バリデーション
| 項目 | タイミング | 検証内容 | エラーメッセージ |
|------|----------|---------|----------------|
| メールアドレス | フォーカス外れ時 | メールアドレス形式 | 「メールアドレスの形式が正しくありません」 |
| メールアドレス | 送信時 | 未入力チェック | 「メールアドレスを入力してください」 |
| パスワード | 送信時 | 未入力チェック | 「パスワードを入力してください」 |
| 認証 | 送信時 | 認証成功/失敗 | 「メールアドレスまたはパスワードが正しくありません」 |

#### 5.1.6 データフロー
**入力データ**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "rememberMe": true
}
```

**APIリクエスト**
```javascript
POST /api/v1/auth/login
{
  "email": "user@example.com",
  "password": "password123"
}
```

**APIレスポンス（成功）**
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "山田太郎",
    "role": "user"
  },
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresIn": 3600
}
```

**処理フロー**
1. ユーザーがメールアドレス、パスワードを入力
2. 「ログイン」ボタンクリック
3. クライアント側バリデーション
4. API呼び出し（POST /api/v1/auth/login）
5. レスポンス受信
6. 成功時: トークンをlocalStorageに保存、ダッシュボードへ遷移
7. 失敗時: エラーメッセージ表示

#### 5.1.7 画面遷移
| トリガー | 遷移先 | 条件 |
|---------|-------|------|
| ログイン成功 | S002 ダッシュボード | - |
| 「新規登録」リンク | 新規登録画面 | - |
| 「パスワードを忘れた方」リンク | パスワードリセット画面 | - |

#### 5.1.8 エラーハンドリング
| エラーケース | 表示方法 | メッセージ |
|------------|---------|----------|
| 認証失敗 | フォーム上部に赤背景 | 「メールアドレスまたはパスワードが正しくありません」 |
| API通信エラー | フォーム上部に赤背景 | 「通信エラーが発生しました。しばらく待ってから再試行してください」 |
| アカウント停止中 | フォーム上部に赤背景 | 「このアカウントは停止されています。管理者にお問い合わせください」 |

#### 5.1.9 デザインノート
- シンプルで迷わないデザイン
- ロゴを中央上部に配置してブランド認知
- 「ログイン」ボタンは目立つプライマリカラー
- パスワード表示/非表示切替アイコンでユーザビリティ向上
- モバイルでも操作しやすいボタンサイズ（最小44x44px）

---

### 5.2 [画面ID: S002 ダッシュボード]

#### 5.2.1 基本情報
| 項目 | 内容 |
|------|------|
| 画面ID | S002 |
| 画面名 | ダッシュボード |
| URL | /dashboard |
| アクセス権限 | ログイン済みユーザー |
| 関連API | GET /api/v1/dashboard/stats |
| 用途 | システムの概要情報、統計情報の表示 |

#### 5.2.2 ワイヤーフレーム
```
┌────────────────────────────────────────────────────┐
│ [ロゴ]  ダッシュボード  ユーザー管理  設定  [👤ユーザー名▼] │ ← ヘッダー
├────────────────────────────────────────────────────┤
│                                                    │
│  ようこそ、山田太郎さん                               │
│                                                    │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐          │
│  │ユーザー数   │ │注文数      │ │売上         │          │
│  │  1,234    │ │  5,678    │ │¥1,234,567 │          │
│  │ (+12)     │ │ (+56)     │ │ (+¥12,345)│          │
│  └──────────┘ └──────────┘ └──────────┘          │
│                                                    │
│  ■ 最近の注文                                       │
│  ┌────────────────────────────────────────┐        │
│  │No  │注文日    │顧客名    │金額      │ステータス│        │
│  ├────────────────────────────────────────┤        │
│  │001 │2024/01/01│山田太郎   │¥10,000  │完了     │        │
│  │002 │2024/01/01│佐藤花子   │¥ 5,000  │処理中   │        │
│  └────────────────────────────────────────┘        │
│  [もっと見る]                                       │
│                                                    │
└────────────────────────────────────────────────────┘
```

[他の画面も同様の形式で詳細設計]

---

### 5.3 [画面ID: S003 ユーザー一覧画面]
[同様に記載]

---

### 5.4 [画面ID: S004 ユーザー詳細画面]
[同様に記載]

---

### 5.5 [画面ID: S005 ユーザー登録画面]
[同様に記載]

---

### 5.6 [画面ID: S006 ユーザー編集画面]
[同様に記載]

---

## 6. 共通コンポーネント
### 6.1 ヘッダー
| 要素 | 説明 |
|------|------|
| ロゴ | 左上に配置、クリックでダッシュボードへ |
| ナビゲーション | 主要メニュー（ダッシュボード、ユーザー管理等） |
| ユーザーメニュー | 右上にユーザー名とアイコン、ドロップダウンでプロフィール、ログアウト |

### 6.2 サイドバー
| 要素 | 説明 |
|------|------|
| メニュー | 階層的なナビゲーション |
| アイコン | 各メニュー項目にアイコン付与 |
| 折りたたみ | モバイル時はハンバーガーメニューで折りたたみ |

### 6.3 フッター
| 要素 | 説明 |
|------|------|
| コピーライト | © 2024 Company Name |
| リンク | プライバシーポリシー、利用規約 |

### 6.4 ローディング表示
| 種類 | 用途 | 表示 |
|------|------|------|
| 全画面ローディング | 画面初期表示時 | スピナー + 「読み込み中...」 |
| ボタンローディング | ボタン押下後 | ボタン内にスピナー |
| テーブルローディング | データ読み込み中 | テーブル上にスケルトン表示 |

### 6.5 ページネーション
| 要素 | 説明 |
|------|------|
| ページ番号 | 1, 2, 3, ... |
| 前へ/次へ | ボタン |
| 件数表示 | 「1-20 / 全100件」 |

## 7. アクセシビリティ
### 7.1 アクセシビリティ対応
| 項目 | 対応内容 |
|------|---------|
| キーボード操作 | Tab, Enter, Escapeで操作可能 |
| スクリーンリーダー | ARIA属性の適切な使用 |
| カラーコントラスト | WCAG AA基準（4.5:1以上） |
| フォーカス表示 | フォーカス時に明確な枠線 |
| 代替テキスト | 画像にalt属性 |

### 7.2 ショートカットキー
| キー | アクション |
|------|----------|
| Ctrl + S | 保存 |
| Esc | モーダルを閉じる |
| Tab | 次の項目へフォーカス |
| Shift + Tab | 前の項目へフォーカス |

## 8. パフォーマンス
### 8.1 パフォーマンス目標
| 項目 | 目標値 |
|------|-------|
| 初回表示時間 | 3秒以内 |
| ページ遷移時間 | 1秒以内 |
| API応答時間 | 500ms以内 |

### 8.2 最適化手法
- 画像の遅延読み込み（Lazy Loading）
- コード分割（Code Splitting）
- キャッシュの活用
- 圧縮・Minify

## 9. 多言語対応
[必要に応じて]
| 言語 | 対応範囲 | 備考 |
|------|---------|------|
| 日本語 | 全画面 | デフォルト |
| 英語 | 主要画面 | ユーザー設定で切替 |

## 10. ブラウザ対応
| ブラウザ | バージョン | 対応状況 |
|---------|----------|---------|
| Chrome | 最新2バージョン | 完全対応 |
| Firefox | 最新2バージョン | 完全対応 |
| Safari | 最新2バージョン | 完全対応 |
| Edge | 最新2バージョン | 完全対応 |
| IE11 | - | 非対応 |

## 11. テスト
### 11.1 テスト観点
- 機能テスト: 全画面、全機能
- UIテスト: デザイン、レイアウト
- レスポンシブテスト: 各ブレイクポイント
- アクセシビリティテスト: WCAG準拠
- ブラウザ互換性テスト: 対応ブラウザ

### 11.2 テストツール
- E2Eテスト: Playwright, Cypress
- ビジュアルリグレッションテスト: Percy, Chromatic
- アクセシビリティテスト: axe, Lighthouse

## 12. デザインガイドライン
### 12.1 コーディング規約
- CSS: BEM記法またはCSS Modules
- コンポーネント: Atomic Designの原則
- 命名規則: 統一されたプレフィックス

### 12.2 スタイルガイド
デザインシステムのドキュメント化:
- カラーパレット
- タイポグラフィ
- コンポーネントライブラリ
- レイアウトグリッド

## 13. 用語集
| 用語 | 説明 |
|------|------|
| ワイヤーフレーム | 画面レイアウトの骨組み |
| モーダル | 画面上に重ねて表示されるダイアログ |
| レスポンシブデザイン | 画面サイズに応じてレイアウトが変化するデザイン |
| [その他用語] | [説明] |

## 14. 変更履歴
| 版数 | 変更日 | 変更者 | 変更内容 |
|------|-------|--------|---------|
| 1.0 | YYYY/MM/DD | [氏名] | 初版作成 |
